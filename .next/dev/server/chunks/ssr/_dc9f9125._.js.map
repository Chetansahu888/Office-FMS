{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/lib/auth.ts"],"sourcesContent":["const APP_SCRIPT_URL = \"https://script.google.com/macros/s/AKfycbzLkH_vSbpObvC85M-t5TBukKIRqQxi0gH_ZjIc_O7xrjjBvz8QDuz4dEjkovODvoI93w/exec\";\n\nexport interface User {\n  username: string;\n  name: string;\n  allowedPages: string[];\n  role?: string;\n}\n\nexport interface LoginResponse {\n  success: boolean;\n  user?: User;\n  error?: string;\n}\n\nexport async function loginUser(\n  username: string, \n  password: string\n): Promise<LoginResponse> {\n  try {\n    console.log('üîê Attempting login for:', username);\n    \n    if (!APP_SCRIPT_URL) {\n      return {\n        success: false,\n        error: 'Configuration error: API URL is not defined.'\n      };\n    }\n    \n    // Use JSONP for Google Apps Script (bypasses CORS)\n    return await loginWithJSONP(username, password);\n    \n  } catch (error) {\n    console.error('‚ùå Login error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Network error occurred.'\n    };\n  }\n}\n\n// Use JSONP for Google Apps Script (bypasses CORS)\nasync function loginWithJSONP(username: string, password: string): Promise<LoginResponse> {\n  return new Promise((resolve) => {\n    const callbackName = `jsonp_callback_${Date.now()}_${Math.random().toString(36).substr(2)}`;\n    \n    // Create script element\n    const script = document.createElement('script');\n    const url = new URL(APP_SCRIPT_URL);\n    url.searchParams.append('action', 'login');\n    url.searchParams.append('username', username);\n    url.searchParams.append('password', password);\n    url.searchParams.append('callback', callbackName);\n    \n    script.src = url.toString();\n    \n    // Define callback function\n    (window as any)[callbackName] = (data: any) => {\n      // Clean up\n      delete (window as any)[callbackName];\n      document.head.removeChild(script);\n      \n      console.log('üì¶ JSONP Login Response:', data);\n      \n      if (!data.success) {\n        resolve({\n          success: false,\n          error: data.error || 'Login failed'\n        });\n        return;\n      }\n      \n      if (!data.user) {\n        resolve({\n          success: false,\n          error: 'Invalid response from server'\n        });\n        return;\n      }\n      \n      // Process allowedPages\n      let processedAllowedPages: string[] = [];\n      if (data.user.allowedPages && Array.isArray(data.user.allowedPages)) {\n        processedAllowedPages = data.user.allowedPages\n          .filter((page: any) => typeof page === 'string' && page.trim().length > 0)\n          .map((page: string) => page.trim());\n      }\n      \n      // If no pages provided, show error\n      if (processedAllowedPages.length === 0) {\n        console.warn('‚ö†Ô∏è No allowed pages received');\n        resolve({\n          success: false,\n          error: 'No page access configured. Contact administrator.'\n        });\n        return;\n      }\n      \n      const processedUser: User = {\n        username: data.user.username,\n        name: data.user.name,\n        allowedPages: processedAllowedPages,\n        role: data.user.role\n      };\n      \n      console.log('‚úÖ Processed user with allowedPages:', processedUser.allowedPages);\n      \n      resolve({\n        success: true,\n        user: processedUser\n      });\n    };\n    \n    // Handle script loading errors\n    script.onerror = () => {\n      delete (window as any)[callbackName];\n      document.head.removeChild(script);\n      resolve({\n        success: false,\n        error: 'Script loading failed'\n      });\n    };\n    \n    // Add script to document\n    document.head.appendChild(script);\n  });\n}"],"names":[],"mappings":";;;;AAAA,MAAM,iBAAiB;AAehB,eAAe,UACpB,QAAgB,EAChB,QAAgB;IAEhB,IAAI;QACF,QAAQ,GAAG,CAAC,4BAA4B;QAExC;;QAOA,mDAAmD;QACnD,OAAO,MAAM,eAAe,UAAU;IAExC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO;YACL,SAAS;YACT,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD;IACF;AACF;AAEA,mDAAmD;AACnD,eAAe,eAAe,QAAgB,EAAE,QAAgB;IAC9D,OAAO,IAAI,QAAQ,CAAC;QAClB,MAAM,eAAe,CAAC,eAAe,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,IAAI;QAE3F,wBAAwB;QACxB,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,MAAM,MAAM,IAAI,IAAI;QACpB,IAAI,YAAY,CAAC,MAAM,CAAC,UAAU;QAClC,IAAI,YAAY,CAAC,MAAM,CAAC,YAAY;QACpC,IAAI,YAAY,CAAC,MAAM,CAAC,YAAY;QACpC,IAAI,YAAY,CAAC,MAAM,CAAC,YAAY;QAEpC,OAAO,GAAG,GAAG,IAAI,QAAQ;QAEzB,2BAA2B;QAC1B,MAAc,CAAC,aAAa,GAAG,CAAC;YAC/B,WAAW;YACX,OAAO,AAAC,MAAc,CAAC,aAAa;YACpC,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,QAAQ,GAAG,CAAC,4BAA4B;YAExC,IAAI,CAAC,KAAK,OAAO,EAAE;gBACjB,QAAQ;oBACN,SAAS;oBACT,OAAO,KAAK,KAAK,IAAI;gBACvB;gBACA;YACF;YAEA,IAAI,CAAC,KAAK,IAAI,EAAE;gBACd,QAAQ;oBACN,SAAS;oBACT,OAAO;gBACT;gBACA;YACF;YAEA,uBAAuB;YACvB,IAAI,wBAAkC,EAAE;YACxC,IAAI,KAAK,IAAI,CAAC,YAAY,IAAI,MAAM,OAAO,CAAC,KAAK,IAAI,CAAC,YAAY,GAAG;gBACnE,wBAAwB,KAAK,IAAI,CAAC,YAAY,CAC3C,MAAM,CAAC,CAAC,OAAc,OAAO,SAAS,YAAY,KAAK,IAAI,GAAG,MAAM,GAAG,GACvE,GAAG,CAAC,CAAC,OAAiB,KAAK,IAAI;YACpC;YAEA,mCAAmC;YACnC,IAAI,sBAAsB,MAAM,KAAK,GAAG;gBACtC,QAAQ,IAAI,CAAC;gBACb,QAAQ;oBACN,SAAS;oBACT,OAAO;gBACT;gBACA;YACF;YAEA,MAAM,gBAAsB;gBAC1B,UAAU,KAAK,IAAI,CAAC,QAAQ;gBAC5B,MAAM,KAAK,IAAI,CAAC,IAAI;gBACpB,cAAc;gBACd,MAAM,KAAK,IAAI,CAAC,IAAI;YACtB;YAEA,QAAQ,GAAG,CAAC,uCAAuC,cAAc,YAAY;YAE7E,QAAQ;gBACN,SAAS;gBACT,MAAM;YACR;QACF;QAEA,+BAA+B;QAC/B,OAAO,OAAO,GAAG;YACf,OAAO,AAAC,MAAc,CAAC,aAAa;YACpC,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,QAAQ;gBACN,SAAS;gBACT,OAAO;YACT;QACF;QAEA,yBAAyB;QACzB,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B;AACF"}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/login-page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Lock, User as UserIcon, Loader2 } from 'lucide-react';\nimport { loginUser } from '@/lib/auth';\nimport { toast } from 'sonner';\n\ninterface User {\n  username: string;\n  name: string;\n  allowedPages: string[];  // ‚úÖ ADDED\n  role?: string;\n  [key: string]: any;\n}\n\ninterface LoginPageProps {\n  onLogin: (user: User) => void;\n}\n\nexport default function LoginPage({ onLogin }: LoginPageProps) {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!username || !password) {\n      setError('Please fill in all fields');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await loginUser(username, password);\n      \n      if (response.success && response.user) {\n        console.log('‚úÖ Login successful:', response.user);\n        toast.success(`Welcome, ${response.user.name}!`);\n        onLogin(response.user);\n      } else {\n        const errorMsg = response.error || 'Invalid username or password';\n        setError(errorMsg);\n        toast.error(errorMsg);\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      const errorMsg = 'Login failed. Please try again.';\n      setError(errorMsg);\n      toast.error(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/10 via-background to-accent/10 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"bg-primary/10 p-3 rounded-lg\">\n              <Lock className=\"w-8 h-8 text-primary\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-2xl\">Office FMS System</CardTitle>\n          <CardDescription>Facility Management System Login</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Username</label>\n              <div className=\"relative\">\n                <UserIcon className=\"absolute left-3 top-3 w-4 h-4 text-muted-foreground\" />\n                <Input\n                  type=\"text\"\n                  placeholder=\"Enter your username\"\n                  value={username}\n                  onChange={(e) => {\n                    setUsername(e.target.value);\n                    setError('');\n                  }}\n                  className=\"pl-10\"\n                  disabled={loading}\n                  autoComplete=\"username\"\n                />\n              </div>\n            </div>\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Password</label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-3 w-4 h-4 text-muted-foreground\" />\n                <Input\n                  type=\"password\"\n                  placeholder=\"Enter your password\"\n                  value={password}\n                  onChange={(e) => {\n                    setPassword(e.target.value);\n                    setError('');\n                  }}\n                  className=\"pl-10\"\n                  disabled={loading}\n                  autoComplete=\"current-password\"\n                />\n              </div>\n            </div>\n            {error && (\n              <div className=\"bg-destructive/10 border border-destructive/20 text-destructive p-3 rounded-md text-sm\">\n                {error}\n              </div>\n            )}\n            <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n              {loading ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Signing in...\n                </>\n              ) : (\n                'Sign In'\n              )}\n            </Button>\n          </form>\n         \n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AARA;;;;;;;;;AAsBe,SAAS,UAAU,EAAE,OAAO,EAAkB;IAC3D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI,CAAC,YAAY,CAAC,UAAU;YAC1B,SAAS;YACT;QACF;QAEA,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,wHAAS,EAAC,UAAU;YAE3C,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI,EAAE;gBACrC,QAAQ,GAAG,CAAC,uBAAuB,SAAS,IAAI;gBAChD,iJAAK,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,SAAS,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC/C,QAAQ,SAAS,IAAI;YACvB,OAAO;gBACL,MAAM,WAAW,SAAS,KAAK,IAAI;gBACnC,SAAS;gBACT,iJAAK,CAAC,KAAK,CAAC;YACd;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,MAAM,WAAW;YACjB,SAAS;YACT,iJAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,iIAAI;YAAC,WAAU;;8BACd,8OAAC,uIAAU;oBAAC,WAAU;;sCACpB,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,0MAAI;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAGpB,8OAAC,sIAAS;4BAAC,WAAU;sCAAW;;;;;;sCAChC,8OAAC,4IAAe;sCAAC;;;;;;;;;;;;8BAEnB,8OAAC,wIAAW;8BACV,cAAA,8OAAC;wBAAK,UAAU;wBAAc,WAAU;;0CACtC,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAAiC;;;;;;kDAClD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0MAAQ;gDAAC,WAAU;;;;;;0DACpB,8OAAC,mIAAK;gDACJ,MAAK;gDACL,aAAY;gDACZ,OAAO;gDACP,UAAU,CAAC;oDACT,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC1B,SAAS;gDACX;gDACA,WAAU;gDACV,UAAU;gDACV,cAAa;;;;;;;;;;;;;;;;;;0CAInB,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAAiC;;;;;;kDAClD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0MAAI;gDAAC,WAAU;;;;;;0DAChB,8OAAC,mIAAK;gDACJ,MAAK;gDACL,aAAY;gDACZ,OAAO;gDACP,UAAU,CAAC;oDACT,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC1B,SAAS;gDACX;gDACA,WAAU;gDACV,UAAU;gDACV,cAAa;;;;;;;;;;;;;;;;;;4BAIlB,uBACC,8OAAC;gCAAI,WAAU;0CACZ;;;;;;0CAGL,8OAAC,qIAAM;gCAAC,MAAK;gCAAS,WAAU;gCAAS,UAAU;0CAChD,wBACC;;sDACE,8OAAC,4NAAO;4CAAC,WAAU;;;;;;wCAA8B;;mDAInD;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAShB"}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { LayoutDashboard, FileText, CheckCircle, Truck, Package, BookOpen, Shield, LogOut,CreditCard } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\n\ninterface SidebarProps {\n  currentPage: string;\n  onPageChange: (page: string) => void;\n  allowedPages: string[];\n}\n\n// All possible menu items\nconst allMenuItems = [\n  { id: 'dashboard', label: 'Dashboard', icon: LayoutDashboard },\n  { id: 'create-indent', label: 'Create Indent', icon: FileText },\n  { id: 'approve-indent', label: 'Approve Indent', icon: CheckCircle },\n  { id: 'lifting', label: 'Lifting', icon: Truck },\n  { id: 'store-in', label: 'Store In', icon: Package },\n  { id: 'tally-entry', label: 'Tally Entry', icon: BookOpen },\n  { id: 'make-payment', label: 'Make Payment', icon:CreditCard },\n  { id: 'license', label: 'License', icon: Shield },\n];\n\nexport default function Sidebar({ currentPage, onPageChange, allowedPages }: SidebarProps) {\n  // Filter menu items based on allowed pages\n  const menuItems = allMenuItems.filter(item => \n    allowedPages && allowedPages.includes(item.id)\n  );\n\n  return (\n    <aside className=\"w-64 bg-card border-r border-border flex flex-col\">\n      <div className=\"p-6 border-b border-border\">\n        <h2 className=\"text-xl font-bold text-primary\">Office FMS</h2>\n      </div>\n\n      <nav className=\"flex-1 p-4 space-y-2 overflow-y-auto\">\n        {menuItems.length > 0 ? (\n          menuItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = currentPage === item.id;\n\n            return (\n              <Button\n                key={item.id}\n                onClick={() => onPageChange(item.id)}\n                variant={isActive ? 'default' : 'ghost'}\n                className={cn(\n                  'w-full justify-start gap-3',\n                  isActive && 'bg-primary text-primary-foreground'\n                )}\n              >\n                <Icon className=\"w-5 h-5\" />\n                <span>{item.label}</span>\n              </Button>\n            );\n          })\n        ) : (\n          <div className=\"text-center text-muted-foreground py-8\">\n            <p className=\"text-sm\">No pages available</p>\n          </div>\n        )}\n      </nav>\n\n      <div className=\"p-4 border-t border-border\">\n        <p className=\"text-xs text-muted-foreground text-center\">\n          Powered by Botivate\n        </p>\n      </div>\n    </aside>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAYA,0BAA0B;AAC1B,MAAM,eAAe;IACnB;QAAE,IAAI;QAAa,OAAO;QAAa,MAAM,+OAAe;IAAC;IAC7D;QAAE,IAAI;QAAiB,OAAO;QAAiB,MAAM,0NAAQ;IAAC;IAC9D;QAAE,IAAI;QAAkB,OAAO;QAAkB,MAAM,0OAAW;IAAC;IACnE;QAAE,IAAI;QAAW,OAAO;QAAW,MAAM,6MAAK;IAAC;IAC/C;QAAE,IAAI;QAAY,OAAO;QAAY,MAAM,mNAAO;IAAC;IACnD;QAAE,IAAI;QAAe,OAAO;QAAe,MAAM,0NAAQ;IAAC;IAC1D;QAAE,IAAI;QAAgB,OAAO;QAAgB,MAAK,gOAAU;IAAC;IAC7D;QAAE,IAAI;QAAW,OAAO;QAAW,MAAM,gNAAM;IAAC;CACjD;AAEc,SAAS,QAAQ,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,EAAgB;IACvF,2CAA2C;IAC3C,MAAM,YAAY,aAAa,MAAM,CAAC,CAAA,OACpC,gBAAgB,aAAa,QAAQ,CAAC,KAAK,EAAE;IAG/C,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;8BAAiC;;;;;;;;;;;0BAGjD,8OAAC;gBAAI,WAAU;0BACZ,UAAU,MAAM,GAAG,IAClB,UAAU,GAAG,CAAC,CAAC;oBACb,MAAM,OAAO,KAAK,IAAI;oBACtB,MAAM,WAAW,gBAAgB,KAAK,EAAE;oBAExC,qBACE,8OAAC,qIAAM;wBAEL,SAAS,IAAM,aAAa,KAAK,EAAE;wBACnC,SAAS,WAAW,YAAY;wBAChC,WAAW,IAAA,kHAAE,EACX,8BACA,YAAY;;0CAGd,8OAAC;gCAAK,WAAU;;;;;;0CAChB,8OAAC;0CAAM,KAAK,KAAK;;;;;;;uBATZ,KAAK,EAAE;;;;;gBAYlB,mBAEA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAU;;;;;;;;;;;;;;;;0BAK7B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAA4C;;;;;;;;;;;;;;;;;AAMjE"}},
    {"offset": {"line": 723, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/pages/dashboard-page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, LineChart, Line, PieChart, Pie, Cell } from 'recharts';\nimport { Loader2, RefreshCw, TrendingUp, TrendingDown, FileText, CheckCircle, Clock } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\nconst SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLkH_vSbpObvC85M-t5TBukKIRqQxi0gH_ZjIc_O7xrjjBvz8QDuz4dEjkovODvoI93w/exec';\n\n// JSONP helper\nfunction fetchJsonp(url: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const callbackName = `jsonp_callback_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const script = document.createElement('script');\n    const timeoutId = setTimeout(() => {\n      cleanup();\n      reject(new Error('Request timeout'));\n    }, 30000);\n\n    function cleanup() {\n      if (script.parentNode) script.parentNode.removeChild(script);\n      delete (window as any)[callbackName];\n      clearTimeout(timeoutId);\n    }\n\n    (window as any)[callbackName] = (data: any) => {\n      cleanup();\n      resolve(data);\n    };\n\n    const separator = url.includes('?') ? '&' : '?';\n    script.src = `${url}${separator}callback=${callbackName}`;\n    script.onerror = () => {\n      cleanup();\n      reject(new Error('Script loading failed'));\n    };\n\n    document.head.appendChild(script);\n  });\n}\n\ninterface DashboardStats {\n  totalIndents: number;\n  approved: number;\n  rejected: number;\n  pendingApproval: number;\n  pendingLifting: number;\n  pendingStoreIn: number;\n  pendingTallyEntry: number;\n  completed: number;\n}\n\ninterface MonthlyData {\n  month: string;\n  indents: number;\n  approved: number;\n  rejected: number;\n  completed: number;\n}\n\ninterface StatCard {\n  label: string;\n  value: string;\n  color: string;\n  icon: React.ComponentType<{ className?: string }>;\n  trend: string;\n  trendUp: boolean;\n}\n\ninterface ChartData {\n  name: string;\n  value: number;\n  color: string;\n  [key: string]: any; // Add index signature\n}\n\nexport default function DashboardPage() {\n  const [stats, setStats] = useState<DashboardStats>({\n    totalIndents: 0,\n    approved: 0,\n    rejected: 0,\n    pendingApproval: 0,\n    pendingLifting: 0,\n    pendingStoreIn: 0,\n    pendingTallyEntry: 0,\n    completed: 0\n  });\n\n  const [monthlyData, setMonthlyData] = useState<MonthlyData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, []);\n\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Fetch all data from FMS sheet\n      const historyData = await fetchJsonp(`${SCRIPT_URL}?action=getFMSHistory`);\n      \n      if (!historyData.success) {\n        throw new Error(historyData.error || 'Failed to fetch data');\n      }\n\n      const indents = historyData.indents || [];\n      \n      // Calculate statistics\n      const totalIndents = indents.length;\n      \n      const approved = indents.filter((indent: any) => \n        indent.What?.toLowerCase() === 'approved' || \n        indent.Status?.toLowerCase() === 'approved'\n      ).length;\n      \n      const rejected = indents.filter((indent: any) => \n        indent.What?.toLowerCase() === 'rejected' || \n        indent.Status?.toLowerCase() === 'rejected'\n      ).length;\n      \n      // Pending counts\n      const pendingApproval = indents.filter((indent: any) => {\n        const hasPlanned = indent.Planned && indent.Planned.toString().trim() !== '';\n        const hasNoActual = !indent.Actual || indent.Actual.toString().trim() === '';\n        return hasPlanned && hasNoActual;\n      }).length;\n      \n      const pendingLifting = indents.filter((indent: any) => {\n        const hasPlanned1 = indent.Planned1 && indent.Planned1.toString().trim() !== '';\n        const hasNoActual1 = !indent.Actual1 || indent.Actual1.toString().trim() === '';\n        return hasPlanned1 && hasNoActual1;\n      }).length;\n      \n      const pendingStoreIn = indents.filter((indent: any) => {\n        const hasPlanned2 = indent.Planned2 && indent.Planned2.toString().trim() !== '';\n        const hasNoActual2 = !indent.Actual2 || indent.Actual2.toString().trim() === '';\n        return hasPlanned2 && hasNoActual2;\n      }).length;\n      \n      const pendingTallyEntry = indents.filter((indent: any) => {\n        const hasPlanned3 = indent.Planned3 && indent.Planned3.toString().trim() !== '';\n        const hasNoActual3 = !indent.Actual3 || indent.Actual3.toString().trim() === '';\n        return hasPlanned3 && hasNoActual3;\n      }).length;\n      \n      const completed = indents.filter((indent: any) => \n        indent.Actual3 && indent.Actual3.toString().trim() !== ''\n      ).length;\n\n      setStats({\n        totalIndents,\n        approved,\n        rejected,\n        pendingApproval,\n        pendingLifting,\n        pendingStoreIn,\n        pendingTallyEntry,\n        completed\n      });\n\n      // Calculate monthly data\n      const monthlyMap = new Map<string, { indents: number; approved: number; rejected: number; completed: number }>();\n      \n      indents.forEach((indent: any) => {\n        if (indent.Timestamp) {\n          try {\n            // Parse timestamp (format: dd/MM/yyyy HH:mm:ss)\n            const dateParts = indent.Timestamp.split(' ')[0].split('/');\n            if (dateParts.length === 3) {\n              const month = dateParts[1]; // MM\n              const year = dateParts[2]; // yyyy\n              const monthYear = `${year}-${month}`;\n              \n              if (!monthlyMap.has(monthYear)) {\n                monthlyMap.set(monthYear, { indents: 0, approved: 0, rejected: 0, completed: 0 });\n              }\n              \n              const data = monthlyMap.get(monthYear)!;\n              data.indents++;\n              \n              if (indent.What?.toLowerCase() === 'approved' || indent.Status?.toLowerCase() === 'approved') {\n                data.approved++;\n              }\n              \n              if (indent.What?.toLowerCase() === 'rejected' || indent.Status?.toLowerCase() === 'rejected') {\n                data.rejected++;\n              }\n              \n              if (indent.Actual3 && indent.Actual3.toString().trim() !== '') {\n                data.completed++;\n              }\n            }\n          } catch (e) {\n            console.error('Error parsing timestamp:', e);\n          }\n        }\n      });\n\n      // Convert to array and sort by date\n      const monthlyArray = Array.from(monthlyMap.entries())\n        .sort((a, b) => a[0].localeCompare(b[0]))\n        .slice(-6) // Last 6 months\n        .map(([key, value]) => {\n          const [year, month] = key.split('-');\n          const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n          return {\n            month: monthNames[parseInt(month) - 1] + ' ' + year.slice(2),\n            ...value\n          };\n        });\n\n      setMonthlyData(monthlyArray);\n\n    } catch (error) {\n      console.error('Error fetching dashboard data:', error);\n      setError('Failed to load dashboard data: ' + (error as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n        <span className=\"ml-2\">Loading dashboard...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center py-8\">\n              <p className=\"text-destructive mb-4\">{error}</p>\n              <Button onClick={fetchDashboardData} className=\"gap-2\">\n                <RefreshCw className=\"w-4 h-4\" />\n                Retry\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const statCards: StatCard[] = [\n    { \n      label: 'Total Indents', \n      value: stats.totalIndents.toString(), \n      color: 'bg-blue-500',\n      icon: FileText,\n      trend: '+12%',\n      trendUp: true\n    },\n    { \n      label: 'Approved', \n      value: stats.approved.toString(), \n      color: 'bg-green-500',\n      icon: CheckCircle,\n      trend: '+8%',\n      trendUp: true\n    },\n    { \n      label: 'Pending Approval', \n      value: stats.pendingApproval.toString(), \n      color: 'bg-yellow-500',\n      icon: Clock,\n      trend: '-3%',\n      trendUp: false\n    },\n    { \n      label: 'Completed', \n      value: stats.completed.toString(), \n      color: 'bg-purple-500',\n      icon: CheckCircle,\n      trend: '+15%',\n      trendUp: true\n    },\n  ];\n\n  const workflowData: ChartData[] = [\n    { name: 'Pending Approval', value: stats.pendingApproval, color: '#f59e0b' },\n    { name: 'Pending Lifting', value: stats.pendingLifting, color: '#3b82f6' },\n    { name: 'Pending Store In', value: stats.pendingStoreIn, color: '#8b5cf6' },\n    { name: 'Pending Tally Entry', value: stats.pendingTallyEntry, color: '#ec4899' },\n    { name: 'Completed', value: stats.completed, color: '#10b981' },\n  ].filter(item => item.value > 0);\n\n  const statusData: ChartData[] = [\n    { name: 'Approved', value: stats.approved, color: '#10b981' },\n    { name: 'Rejected', value: stats.rejected, color: '#ef4444' },\n    { name: 'Pending', value: stats.totalIndents - stats.approved - stats.rejected, color: '#f59e0b' },\n  ].filter(item => item.value > 0);\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Dashboard</h1>\n          <p className=\"text-muted-foreground\">Welcome to Office FMS System</p>\n        </div>\n        <Button onClick={fetchDashboardData} variant=\"outline\" size=\"sm\" className=\"gap-2\">\n          <RefreshCw className=\"w-4 h-4\" />\n          Refresh\n        </Button>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {statCards.map((stat) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={stat.label} className=\"overflow-hidden\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm text-muted-foreground\">{stat.label}</p>\n                    <p className=\"text-3xl font-bold text-foreground\">{stat.value}</p>\n                    <div className=\"flex items-center gap-1 text-xs\">\n                      {stat.trendUp ? (\n                        <TrendingUp className=\"w-3 h-3 text-green-500\" />\n                      ) : (\n                        <TrendingDown className=\"w-3 h-3 text-red-500\" />\n                      )}\n                      <span className={stat.trendUp ? 'text-green-500' : 'text-red-500'}>\n                        {stat.trend}\n                      </span>\n                      <span className=\"text-muted-foreground\">vs last month</span>\n                    </div>\n                  </div>\n                  <div className={`${stat.color} p-3 rounded-lg`}>\n                    <Icon className=\"w-6 h-6 text-white\" />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Secondary Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Pending Lifting</p>\n                <p className=\"text-2xl font-bold\">{stats.pendingLifting}</p>\n              </div>\n              <Clock className=\"w-8 h-8 text-blue-500\" />\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Pending Store In</p>\n                <p className=\"text-2xl font-bold\">{stats.pendingStoreIn}</p>\n              </div>\n              <Clock className=\"w-8 h-8 text-purple-500\" />\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Pending Tally Entry</p>\n                <p className=\"text-2xl font-bold\">{stats.pendingTallyEntry}</p>\n              </div>\n              <Clock className=\"w-8 h-8 text-pink-500\" />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Charts */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Monthly Activity */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Monthly Activity</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {monthlyData.length > 0 ? (\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={monthlyData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border)\" />\n                  <XAxis dataKey=\"month\" stroke=\"var(--foreground)\" />\n                  <YAxis stroke=\"var(--foreground)\" />\n                  <Tooltip \n                    contentStyle={{ \n                      backgroundColor: 'var(--background)', \n                      border: '1px solid var(--border)',\n                      borderRadius: '8px'\n                    }}\n                  />\n                  <Legend />\n                  <Bar dataKey=\"indents\" fill=\"#3b82f6\" name=\"Total Indents\" />\n                  <Bar dataKey=\"approved\" fill=\"#10b981\" name=\"Approved\" />\n                  <Bar dataKey=\"rejected\" fill=\"#ef4444\" name=\"Rejected\" />\n                </BarChart>\n              </ResponsiveContainer>\n            ) : (\n              <div className=\"flex items-center justify-center h-[300px] text-muted-foreground\">\n                No data available\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Completion Trend */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Completion Trend</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {monthlyData.length > 0 ? (\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <LineChart data={monthlyData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border)\" />\n                  <XAxis dataKey=\"month\" stroke=\"var(--foreground)\" />\n                  <YAxis stroke=\"var(--foreground)\" />\n                  <Tooltip \n                    contentStyle={{ \n                      backgroundColor: 'var(--background)', \n                      border: '1px solid var(--border)',\n                      borderRadius: '8px'\n                    }}\n                  />\n                  <Legend />\n                  <Line type=\"monotone\" dataKey=\"completed\" stroke=\"#8b5cf6\" strokeWidth={2} name=\"Completed\" />\n                  <Line type=\"monotone\" dataKey=\"indents\" stroke=\"#3b82f6\" strokeWidth={2} name=\"Total\" />\n                </LineChart>\n              </ResponsiveContainer>\n            ) : (\n              <div className=\"flex items-center justify-center h-[300px] text-muted-foreground\">\n                No data available\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Workflow Status */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Workflow Status</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {workflowData.length > 0 ? (\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <PieChart>\n                  <Pie\n                    data={workflowData}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    labelLine={false}\n                    label={({ name, percent }: any) => `${name}: ${(percent * 100).toFixed(0)}%`}\n                    outerRadius={80}\n                    fill=\"#8884d8\"\n                    dataKey=\"value\"\n                  >\n                    {workflowData.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={entry.color} />\n                    ))}\n                  </Pie>\n                  <Tooltip />\n                </PieChart>\n              </ResponsiveContainer>\n            ) : (\n              <div className=\"flex items-center justify-center h-[300px] text-muted-foreground\">\n                No data available\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Approval Status */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Approval Status</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {statusData.length > 0 ? (\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <PieChart>\n                  <Pie\n                    data={statusData}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    labelLine={false}\n                    label={({ name, percent }: any) => `${name}: ${(percent * 100).toFixed(0)}%`}\n                    outerRadius={80}\n                    fill=\"#8884d8\"\n                    dataKey=\"value\"\n                  >\n                    {statusData.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={entry.color} />\n                    ))}\n                  </Pie>\n                  <Tooltip />\n                </PieChart>\n              </ResponsiveContainer>\n            ) : (\n              <div className=\"flex items-center justify-center h-[300px] text-muted-foreground\">\n                No data available\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Recent Activity Summary */}\n      <Card>\n        <CardHeader>\n          <CardTitle>System Overview</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"text-center p-4 border border-border rounded-lg\">\n              <p className=\"text-2xl font-bold text-blue-500\">{stats.totalIndents}</p>\n              <p className=\"text-sm text-muted-foreground\">Total Indents</p>\n            </div>\n            <div className=\"text-center p-4 border border-border rounded-lg\">\n              <p className=\"text-2xl font-bold text-green-500\">{stats.approved}</p>\n              <p className=\"text-sm text-muted-foreground\">Approved</p>\n            </div>\n            <div className=\"text-center p-4 border border-border rounded-lg\">\n              <p className=\"text-2xl font-bold text-red-500\">{stats.rejected}</p>\n              <p className=\"text-sm text-muted-foreground\">Rejected</p>\n            </div>\n            <div className=\"text-center p-4 border border-border rounded-lg\">\n              <p className=\"text-2xl font-bold text-purple-500\">{stats.completed}</p>\n              <p className=\"text-sm text-muted-foreground\">Completed</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1948, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,8OAAC,6KAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,kHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,2OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,aAAU;YACV,WAAW,IAAA,kHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8OAAC;;;;;8BACD,8OAAC,8KAAwB;oBACvB,WAAW,IAAA,kHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,8OAAC,0KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mLAA6B;8BAC5B,cAAA,8OAAC,qNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,8OAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,8OAAC,+KAAyB;QACxB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,8OAAC,oLAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,qOAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8OAAC,sLAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2OAAe;YAAC,WAAU;;;;;;;;;;;AAGjC"}},
    {"offset": {"line": 2181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/ui/tabs.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn('flex flex-col gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn('flex-1 outline-none', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2247, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/lib/fms.ts"],"sourcesContent":["const APP_SCRIPT_URL = \"https://script.google.com/macros/s/AKfycbyrXryQ1beeG3ABF5jq8--wiPXnjY5JIVoEdtpBMbS3Lr4Lyc7tJKJ1JLuCqRYMV-UAwQ/exec\";\n\n// JSONP helper\nfunction jsonp(url: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const callbackName = 'jsonp_callback_' + Math.random().toString(36).substring(7);\n    const script = document.createElement('script');\n    \n    (window as any)[callbackName] = (data: any) => {\n      delete (window as any)[callbackName];\n      document.body.removeChild(script);\n      resolve(data);\n    };\n    \n    script.src = url + (url.includes('?') ? '&' : '?') + 'callback=' + callbackName;\n    script.onerror = () => {\n      delete (window as any)[callbackName];\n      document.body.removeChild(script);\n      reject(new Error('JSONP request failed'));\n    };\n    \n    document.body.appendChild(script);\n    \n    // Timeout after 30 seconds\n    setTimeout(() => {\n      if ((window as any)[callbackName]) {\n        delete (window as any)[callbackName];\n        if (document.body.contains(script)) {\n          document.body.removeChild(script);\n        }\n        reject(new Error('JSONP request timeout'));\n      }\n    }, 30000);\n  });\n}\n\nexport async function getMasterData() {\n  try {\n    const url = `${APP_SCRIPT_URL}?action=getMasterData&_=${Date.now()}`;\n    console.log('üîç Fetching master data from:', url);\n    \n    const data = await jsonp(url);\n    console.log('‚úÖ Master data received:', data);\n    \n    return data;\n  } catch (error) {\n    console.error('‚ùå Error fetching master data:', error);\n    return {\n      success: false,\n      indentorNames: [],\n      groupHeads: [],\n      productNames: [],\n      error: error instanceof Error ? error.message : 'Failed to fetch master data'\n    };\n  }\n}\n\nexport async function getFMSHistory() {\n  try {\n    const url = `${APP_SCRIPT_URL}?action=getFMSHistory&_=${Date.now()}`;\n    console.log('üîç Fetching history from:', url);\n    \n    const data = await jsonp(url);\n    console.log('‚úÖ History received:', data);\n    \n    return data;\n  } catch (error) {\n    console.error('‚ùå Error fetching history:', error);\n    return {\n      success: false,\n      indents: [],\n      error: error instanceof Error ? error.message : 'Failed to fetch history'\n    };\n  }\n}\n\nexport async function submitFMSIndent(formData: any) {\n  try {\n    console.log('üì§ Submitting FMS indent...', formData);\n    \n    // Build URL with query parameters for GET request\n    const params = new URLSearchParams({\n      action: 'submitFMS',\n      indentorName: formData.indentorName || '',\n      areaOfMachine: formData.areaOfMachine || '',\n      groupHead: formData.groupHead || '',\n      productName: formData.productName || '',\n      qty: (formData.qty || 0).toString(),\n      specifications: formData.specifications || '',\n      _: Date.now().toString()\n    });\n    \n    const url = `${APP_SCRIPT_URL}?${params.toString()}`;\n    console.log('üîó Submission URL:', url);\n    \n    const data = await jsonp(url);\n    console.log('‚úÖ Submission response:', data);\n    \n    return data;\n    \n  } catch (error) {\n    console.error('‚ùå Error submitting indent:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to submit indent'\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,iBAAiB;AAEvB,eAAe;AACf,SAAS,MAAM,GAAW;IACxB,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,eAAe,oBAAoB,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;QAC9E,MAAM,SAAS,SAAS,aAAa,CAAC;QAErC,MAAc,CAAC,aAAa,GAAG,CAAC;YAC/B,OAAO,AAAC,MAAc,CAAC,aAAa;YACpC,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,QAAQ;QACV;QAEA,OAAO,GAAG,GAAG,MAAM,CAAC,IAAI,QAAQ,CAAC,OAAO,MAAM,GAAG,IAAI,cAAc;QACnE,OAAO,OAAO,GAAG;YACf,OAAO,AAAC,MAAc,CAAC,aAAa;YACpC,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,OAAO,IAAI,MAAM;QACnB;QAEA,SAAS,IAAI,CAAC,WAAW,CAAC;QAE1B,2BAA2B;QAC3B,WAAW;YACT,IAAI,AAAC,MAAc,CAAC,aAAa,EAAE;gBACjC,OAAO,AAAC,MAAc,CAAC,aAAa;gBACpC,IAAI,SAAS,IAAI,CAAC,QAAQ,CAAC,SAAS;oBAClC,SAAS,IAAI,CAAC,WAAW,CAAC;gBAC5B;gBACA,OAAO,IAAI,MAAM;YACnB;QACF,GAAG;IACL;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,GAAG,eAAe,wBAAwB,EAAE,KAAK,GAAG,IAAI;QACpE,QAAQ,GAAG,CAAC,iCAAiC;QAE7C,MAAM,OAAO,MAAM,MAAM;QACzB,QAAQ,GAAG,CAAC,2BAA2B;QAEvC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO;YACL,SAAS;YACT,eAAe,EAAE;YACjB,YAAY,EAAE;YACd,cAAc,EAAE;YAChB,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD;IACF;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,GAAG,eAAe,wBAAwB,EAAE,KAAK,GAAG,IAAI;QACpE,QAAQ,GAAG,CAAC,6BAA6B;QAEzC,MAAM,OAAO,MAAM,MAAM;QACzB,QAAQ,GAAG,CAAC,uBAAuB;QAEnC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO;YACL,SAAS;YACT,SAAS,EAAE;YACX,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD;IACF;AACF;AAEO,eAAe,gBAAgB,QAAa;IACjD,IAAI;QACF,QAAQ,GAAG,CAAC,+BAA+B;QAE3C,kDAAkD;QAClD,MAAM,SAAS,IAAI,gBAAgB;YACjC,QAAQ;YACR,cAAc,SAAS,YAAY,IAAI;YACvC,eAAe,SAAS,aAAa,IAAI;YACzC,WAAW,SAAS,SAAS,IAAI;YACjC,aAAa,SAAS,WAAW,IAAI;YACrC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE,QAAQ;YACjC,gBAAgB,SAAS,cAAc,IAAI;YAC3C,GAAG,KAAK,GAAG,GAAG,QAAQ;QACxB;QAEA,MAAM,MAAM,GAAG,eAAe,CAAC,EAAE,OAAO,QAAQ,IAAI;QACpD,QAAQ,GAAG,CAAC,sBAAsB;QAElC,MAAM,OAAO,MAAM,MAAM;QACzB,QAAQ,GAAG,CAAC,0BAA0B;QAEtC,OAAO;IAET,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO;YACL,SAAS;YACT,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD;IACF;AACF"}},
    {"offset": {"line": 2350, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/pages/create-indent.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Loader2, CheckCircle, History, PlusCircle, Search, AlertCircle } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { getMasterData, submitFMSIndent, getFMSHistory } from '@/lib/fms';\n\ninterface FMSIndent {\n  Timestamp: string;\n  'Indent No.'?: string;  // Try with period\n  'Indent No'?: string;   // Try without period\n  'Indentor Name': string;\n  'Area Of Machine': string;\n  'Group Head': string;\n  'Product Name': string;\n  Qty: number;\n  Specifications: string;\n}\n\nexport default function CreateIndent() {\n  const [activeTab, setActiveTab] = useState('create');\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  const [formData, setFormData] = useState({\n    indentorName: '',\n    areaOfMachine: '',\n    groupHead: '',\n    productName: '',\n    qty: 0,\n    specifications: '',\n  });\n\n  const [masterData, setMasterData] = useState({\n    indentorNames: [] as string[],\n    groupHeads: [] as string[],\n    productNames: [] as string[],\n  });\n\n  const [history, setHistory] = useState<FMSIndent[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingHistory, setLoadingHistory] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [indentNo, setIndentNo] = useState('');\n\n  // Fetch master data on mount\n  useEffect(() => {\n    async function fetchData() {\n      setLoading(true);\n      try {\n        const data = await getMasterData();\n        \n        console.log('üìä Master data response:', data);\n        \n        if (data.success) {\n          setMasterData({\n            indentorNames: data.indentorNames || [],\n            groupHeads: data.groupHeads || [],\n            productNames: data.productNames || [],\n          });\n          \n          const total = (data.indentorNames?.length || 0) + (data.groupHeads?.length || 0) + (data.productNames?.length || 0);\n          \n          if (total > 0) {\n            toast.success(`Loaded ${data.indentorNames?.length || 0} indentors, ${data.groupHeads?.length || 0} groups, ${data.productNames?.length || 0} products`);\n          } else {\n            toast.warning('No master data found. Please add data to MASTER sheet.');\n          }\n        } else {\n          toast.error(data.error || 'Failed to load master data');\n        }\n      } catch (error) {\n        console.error('Error fetching master data:', error);\n        toast.error('Failed to load master data');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchData();\n  }, []);\n\n  // Fetch history when switching to history tab\n const loadHistory = async () => {\n  setLoadingHistory(true);\n  try {\n    const data = await getFMSHistory();\n    \n    console.log('üìú History data received:', data);\n    console.log('üìã First indent keys:', data.indents?.[0] ? Object.keys(data.indents[0]) : 'No data');\n    \n    if (data.success) {\n      setHistory(data.indents || []);\n      toast.success(`Loaded ${data.indents?.length || 0} history records`);\n    } else {\n      toast.error(data.error || 'Failed to load history');\n    }\n  } catch (error) {\n    console.error('Error fetching history:', error);\n    toast.error('Failed to load history');\n  } finally {\n    setLoadingHistory(false);\n  }\n};\n\n\n  useEffect(() => {\n    if (activeTab === 'history') {\n      loadHistory();\n    }\n  }, [activeTab]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    // Validation\n    if (!formData.indentorName || !formData.groupHead || !formData.productName || !formData.areaOfMachine) {\n      toast.error('Please fill in all required fields');\n      return;\n    }\n\n    if (!formData.qty || formData.qty <= 0) {\n      toast.error('Please enter a valid quantity');\n      return;\n    }\n\n    setSubmitting(true);\n\n    try {\n      const response = await submitFMSIndent(formData);\n\n      if (response.success) {\n        setIndentNo(response.indentNo || '');\n        setSubmitted(true);\n        toast.success(`Indent created successfully! Indent No: ${response.indentNo}`);\n\n        // Reset form after 3 seconds\n        setTimeout(() => {\n          setFormData({\n            indentorName: '',\n            areaOfMachine: '',\n            groupHead: '',\n            productName: '',\n            qty: 0,\n            specifications: '',\n          });\n          setSubmitted(false);\n          setIndentNo('');\n        }, 3000);\n      } else {\n        toast.error(response.error || 'Failed to submit indent');\n      }\n    } catch (error) {\n      console.error('Submit error:', error);\n      toast.error('Failed to submit indent. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleInputChange = (field: string, value: string | number) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const filteredHistory = history.filter(indent => {\n  const indentNo = indent['Indent No.'] || indent['Indent No'] || '';\n  return (\n    indent['Indentor Name']?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    indentNo.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    indent['Product Name']?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    indent['Area Of Machine']?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n});\n\n\n  if (loading) {\n    return (\n      <div className=\"p-6 flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center\">\n          <Loader2 className=\"w-8 h-8 animate-spin mx-auto mb-2 text-primary\" />\n          <p className=\"text-muted-foreground\">Loading form data...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const hasNoMasterData = masterData.indentorNames.length === 0 && \n                          masterData.groupHeads.length === 0 && \n                          masterData.productNames.length === 0;\n\n  return (\n    <div className=\"p-6 max-w-7xl mx-auto\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-2xl font-bold text-center\">Indent Management System</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {hasNoMasterData && (\n            <div className=\"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg flex items-start gap-3\">\n              <AlertCircle className=\"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0\" />\n              <div>\n                <p className=\"text-sm font-medium text-yellow-800 dark:text-yellow-300\">\n                  No master data found\n                </p>\n                <p className=\"text-xs text-yellow-700 dark:text-yellow-400 mt-1\">\n                  Please add indentor names, group heads, and product names to the MASTER sheet in your Google Spreadsheet.\n                </p>\n              </div>\n            </div>\n          )}\n\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className=\"grid w-full grid-cols-2 mb-6\">\n              <TabsTrigger value=\"create\" className=\"gap-2\">\n                <PlusCircle className=\"w-4 h-4\" />\n                Create Indent\n              </TabsTrigger>\n              <TabsTrigger value=\"history\" className=\"gap-2\">\n                <History className=\"w-4 h-4\" />\n                View History\n              </TabsTrigger>\n            </TabsList>\n\n            {/* CREATE TAB */}\n            <TabsContent value=\"create\">\n              {!hasNoMasterData && (\n                <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\n                  <p className=\"text-sm text-blue-800 dark:text-blue-300\">\n                    {/* <strong>Data Loaded:</strong> {masterData.indentorNames.length} indentors, {masterData.groupHeads.length} groups, {masterData.productNames.length} products */}\n                  </p>\n                </div>\n              )}\n              \n              <form onSubmit={handleSubmit} className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  \n                  {/* Indentor Name */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium mb-2\">\n                      Indentor Name *\n                    </label>\n                    <Select\n                      value={formData.indentorName}\n                      onValueChange={(value) => handleInputChange('indentorName', value)}\n                      disabled={masterData.indentorNames.length === 0}\n                    >\n                      <SelectTrigger className=\"w-full\">\n                        <SelectValue placeholder={masterData.indentorNames.length === 0 ? \"No indentors available\" : \"Select indentor\"} />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {masterData.indentorNames.map((name) => (\n                          <SelectItem key={name} value={name}>\n                            {name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {/* Area Of Machine */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium mb-2\">\n                      Area Of Machine *\n                    </label>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"Enter area of machine\"\n                      value={formData.areaOfMachine}\n                      onChange={(e) => handleInputChange('areaOfMachine', e.target.value)}\n                      className=\"w-full\"\n                      required\n                    />\n                  </div>\n\n                  {/* Group Head */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium mb-2\">\n                      Group Head *\n                    </label>\n                    <Select\n                      value={formData.groupHead}\n                      onValueChange={(value) => handleInputChange('groupHead', value)}\n                      disabled={masterData.groupHeads.length === 0}\n                    >\n                      <SelectTrigger className=\"w-full\">\n                        <SelectValue placeholder={masterData.groupHeads.length === 0 ? \"No groups available\" : \"Select group head\"} />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {masterData.groupHeads.map((head) => (\n                          <SelectItem key={head} value={head}>\n                            {head}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {/* Product Name */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium mb-2\">\n                      Product Name *\n                    </label>\n                    <Select\n                      value={formData.productName}\n                      onValueChange={(value) => handleInputChange('productName', value)}\n                      disabled={masterData.productNames.length === 0}\n                    >\n                      <SelectTrigger className=\"w-full\">\n                        <SelectValue placeholder={masterData.productNames.length === 0 ? \"No products available\" : \"Select product\"} />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {masterData.productNames.map((product) => (\n                          <SelectItem key={product} value={product}>\n                            {product}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {/* Quantity */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium mb-2\">\n                      Quantity *\n                    </label>\n                    <Input\n                      type=\"number\"\n                      placeholder=\"Enter quantity\"\n                      value={formData.qty || ''}\n                      onChange={(e) => handleInputChange('qty', parseInt(e.target.value) || 0)}\n                      min=\"1\"\n                      className=\"w-full\"\n                      required\n                    />\n                  </div>\n\n                  {/* Specifications */}\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium mb-2\">\n                      Specifications\n                    </label>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"Enter specifications\"\n                      value={formData.specifications}\n                      onChange={(e) => handleInputChange('specifications', e.target.value)}\n                      className=\"w-full\"\n                    />\n                  </div>\n                </div>\n\n                {/* Success Message */}\n                {submitted && (\n                  <div className=\"flex items-center gap-2 p-4 bg-green-50 dark:bg-green-500/10 border border-green-200 dark:border-green-500/30 rounded-lg\">\n                    <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n                    <div>\n                      <p className=\"text-green-800 dark:text-green-300 font-medium\">\n                        Indent created successfully!\n                      </p>\n                      <p className=\"text-sm text-green-600 dark:text-green-400\">\n                        Indent No: {indentNo}\n                      </p>\n                    </div>\n                  </div>\n                )}\n\n                <Button \n                  type=\"submit\" \n                  className=\"w-full md:w-auto min-w-[200px] bg-blue-600 hover:bg-blue-700\" \n                  disabled={submitting || hasNoMasterData}\n                  size=\"lg\"\n                >\n                  {submitting ? (\n                    <>\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      Submitting...\n                    </>\n                  ) : (\n                    'Submit Indent'\n                  )}\n                </Button>\n              </form>\n            </TabsContent>\n\n            {/* HISTORY TAB - TABLE FORMAT */}\n            <TabsContent value=\"history\">\n              <div className=\"space-y-4\">\n                {/* Search Bar */}\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"relative flex-1\">\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                    <Input\n                      placeholder=\"Search...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"pl-10\"\n                    />\n                  </div>\n                  <Button \n                    onClick={loadHistory} \n                    variant=\"outline\" \n                    size=\"sm\"\n                    disabled={loadingHistory}\n                  >\n                    {loadingHistory ? (\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    ) : null}\n                    Refresh\n                  </Button>\n                </div>\n\n                {loadingHistory ? (\n                  <div className=\"flex items-center justify-center py-12\">\n                    <Loader2 className=\"w-8 h-8 animate-spin text-primary mr-2\" />\n                    <span>Loading history...</span>\n                  </div>\n                ) : (\n                  <div className=\"border rounded-lg overflow-hidden\">\n                    {/* Table */}\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full\">\n                        <thead className=\"bg-gray-50 dark:bg-gray-800\">\n                          <tr>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                              Timestamp\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                              Indent No\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                              Indentor Name\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                              Area Of Machine\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                              Group Head\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                              Product Name\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                              Qty\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                              Specifications\n                            </th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700\">\n                          {filteredHistory.length === 0 ? (\n                            <tr>\n                              <td colSpan={8} className=\"px-4 py-8 text-center text-gray-500\">\n                                <History className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                                <p className=\"text-sm\">\n                                  {history.length === 0 \n                                    ? 'No indents found. Create your first indent to see it here.'\n                                    : 'No results match your search.'}\n                                </p>\n                              </td>\n                            </tr>\n                          ) : (\n                            filteredHistory.map((indent, index) => (\n                              <tr \n                                key={index} \n                                className=\"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\"\n                              >\n                                <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100\">\n                                  {indent.Timestamp || '-'}\n                                </td>\n                                <td className=\"px-4 py-3 text-sm font-medium text-gray-900 dark:text-gray-100\">\n                              {indent['Indent No.'] || indent['Indent No'] || '-'}\n                              </td>\n\n                                <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100\">\n                                  {indent['Indentor Name'] || '-'}\n                                </td>\n                                <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100\">\n                                  {indent['Area Of Machine'] || '-'}\n                                </td>\n                                <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100\">\n                                  {indent['Group Head'] || '-'}\n                                </td>\n                                <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100\">\n                                  {indent['Product Name'] || '-'}\n                                </td>\n                                <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100\">\n                                  {indent.Qty || 0}\n                                </td>\n                                <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-gray-100\">\n                                  {indent.Specifications || '-'}\n                                </td>\n                              </tr>\n                            ))\n                          )}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3349, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/pages/approve-indent.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { CheckCircle, XCircle, Loader2, RefreshCw } from 'lucide-react';\n\ninterface IndentData {\n  rowNumber: number;\n  'Indent No.'?: string;\n  'Indentor Name'?: string;\n  'Group Head'?: string;\n  'Product Name'?: string;\n  Qty?: number;\n  Specifications?: string;\n  Planned?: string;\n  Actual?: string;\n  Timestamp?: string;\n  [key: string]: any;\n}\n\nconst SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLkH_vSbpObvC85M-t5TBukKIRqQxi0gH_ZjIc_O7xrjjBvz8QDuz4dEjkovODvoI93w/exec';\n\n// JSONP helper function to bypass CORS\nfunction fetchJsonp(url: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const callbackName = `jsonp_callback_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const script = document.createElement('script');\n    const timeoutId = setTimeout(() => {\n      cleanup();\n      reject(new Error('Request timeout'));\n    }, 30000);\n\n    function cleanup() {\n      if (script.parentNode) {\n        script.parentNode.removeChild(script);\n      }\n      delete (window as any)[callbackName];\n      clearTimeout(timeoutId);\n    }\n\n    (window as any)[callbackName] = (data: any) => {\n      cleanup();\n      resolve(data);\n    };\n\n    const separator = url.includes('?') ? '&' : '?';\n    script.src = `${url}${separator}callback=${callbackName}`;\n    script.onerror = () => {\n      cleanup();\n      reject(new Error('Script loading failed'));\n    };\n\n    document.head.appendChild(script);\n  });\n}\n\nexport default function ApproveIndent() {\n  const [indents, setIndents] = useState<IndentData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [actionLoading, setActionLoading] = useState<number | null>(null);\n  const [showApprovalModal, setShowApprovalModal] = useState(false);\n  const [pendingAction, setPendingAction] = useState<{indent: IndentData, action: 'approve' | 'reject'} | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchPendingApprovals();\n  }, []);\n\n  const fetchPendingApprovals = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      console.log('Fetching pending approvals...');\n      const data = await fetchJsonp(`${SCRIPT_URL}?action=getPendingApprovals`);\n      console.log('Response:', data);\n\n      if (data.success) {\n        setIndents(data.indents || []);\n        console.log('Loaded', data.indents?.length || 0, 'pending approvals');\n      } else {\n        console.error('Error from server:', data.error);\n        setError(data.error || 'Failed to fetch pending approvals');\n      }\n    } catch (error) {\n      console.error('Fetch error:', error);\n      setError('Network error while fetching data: ' + (error as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleApprovalClick = (indent: IndentData, action: 'approve' | 'reject') => {\n    setPendingAction({ indent, action });\n    setShowApprovalModal(true);\n  };\n\n  const confirmApprovalAction = async () => {\n    if (!pendingAction) return;\n\n    const { indent, action } = pendingAction;\n\n    try {\n      setActionLoading(indent.rowNumber);\n      \n      console.log('Submitting approval action:', { rowNumber: indent.rowNumber, action });\n      \n      // Use JSONP for GET request\n      const data = await fetchJsonp(\n        `${SCRIPT_URL}?action=approvalAction&rowNumber=${indent.rowNumber}&actionType=${action}`\n      );\n      \n      console.log('Approval response:', data);\n\n      if (data.success) {\n        alert(`Indent ${action === 'approve' ? 'approved' : 'rejected'} successfully!`);\n        // Remove the indent from the list\n        setIndents(indents.filter(i => i.rowNumber !== indent.rowNumber));\n      } else {\n        alert('Error: ' + data.error);\n      }\n    } catch (error) {\n      console.error('Submission error:', error);\n      alert('Network error during submission: ' + (error as Error).message);\n    } finally {\n      setActionLoading(null);\n      setShowApprovalModal(false);\n      setPendingAction(null);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n        <span className=\"ml-2\">Loading pending approvals...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center py-8\">\n              <p className=\"text-destructive mb-4\">{error}</p>\n              <Button onClick={fetchPendingApprovals} className=\"gap-2\">\n                <RefreshCw className=\"w-4 h-4\" />\n                Retry\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <CardTitle>Approve Indents ({indents.length} Pending)</CardTitle>\n          <Button \n            onClick={fetchPendingApprovals} \n            variant=\"outline\" \n            size=\"sm\"\n            className=\"gap-2\"\n          >\n            <RefreshCw className=\"w-4 h-4\" />\n            Refresh\n          </Button>\n        </CardHeader>\n        <CardContent>\n          {indents.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              No pending approvals at this time.\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-border\">\n                    <th className=\"text-left py-3 px-4 font-semibold\">Indent No.</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Indentor</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Group Head</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Product</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Qty</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Specifications</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Date</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {indents.map((indent) => (\n                    <tr key={indent.rowNumber} className=\"border-b border-border hover:bg-muted/50\">\n                      <td className=\"py-3 px-4\">{indent['Indent No.'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Indentor Name'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Group Head'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Product Name'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent.Qty || 0}</td>\n                      <td className=\"py-3 px-4\">{indent.Specifications || '-'}</td>\n                      <td className=\"py-3 px-4 text-sm text-muted-foreground\">\n                        {indent.Timestamp || '-'}\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"flex gap-2\">\n                          <Button\n                            size=\"sm\"\n                            className=\"bg-green-500 hover:bg-green-600 text-white gap-1\"\n                            onClick={() => handleApprovalClick(indent, 'approve')}\n                            disabled={actionLoading === indent.rowNumber}\n                          >\n                            {actionLoading === indent.rowNumber ? (\n                              <Loader2 className=\"w-4 h-4 animate-spin\" />\n                            ) : (\n                              <CheckCircle className=\"w-4 h-4\" />\n                            )}\n                            Approve\n                          </Button>\n                          <Button\n                            size=\"sm\"\n                            variant=\"destructive\"\n                            className=\"gap-1\"\n                            onClick={() => handleApprovalClick(indent, 'reject')}\n                            disabled={actionLoading === indent.rowNumber}\n                          >\n                            {actionLoading === indent.rowNumber ? (\n                              <Loader2 className=\"w-4 h-4 animate-spin\" />\n                            ) : (\n                              <XCircle className=\"w-4 h-4\" />\n                            )}\n                            Reject\n                          </Button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          {/* Approval Confirmation Modal */}\n          {showApprovalModal && pendingAction && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\n              <Card className=\"w-full max-w-md\">\n                <CardHeader>\n                  <CardTitle>\n                    {pendingAction.action === 'approve' ? 'Approve' : 'Reject'} Indent\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <p>\n                    Are you sure you want to {pendingAction.action} indent{' '}\n                    <strong>{pendingAction.indent['Indent No.']}</strong>?\n                  </p>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      onClick={confirmApprovalAction}\n                      className={\n                        pendingAction.action === 'approve'\n                          ? 'flex-1 bg-green-500 hover:bg-green-600'\n                          : 'flex-1 bg-destructive hover:bg-destructive/90'\n                      }\n                    >\n                      Confirm\n                    </Button>\n                    <Button\n                      onClick={() => {\n                        setShowApprovalModal(false);\n                        setPendingAction(null);\n                      }}\n                      variant=\"outline\"\n                      className=\"flex-1\"\n                    >\n                      Cancel\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3948, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/pages/lifting-module.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Loader2, RefreshCw, Upload, CheckCircle } from 'lucide-react';\n\ninterface LiftingData {\n  rowNumber: number;\n  'Indent No.'?: string;\n  'Indentor Name'?: string;\n  'Group Head'?: string;\n  'Product Name'?: string;\n  Qty?: number;\n  Specifications?: string;\n  Planned1?: string;\n  Timestamp?: string;\n  [key: string]: any;\n}\n\ninterface LiftingFormData {\n  billNo: string;\n  vendorName: string;\n  liftQty: number;\n  typeOfBill: string;\n  billAmount: number;\n  photoOfBill: File | null;\n}\n\nconst SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLkH_vSbpObvC85M-t5TBukKIRqQxi0gH_ZjIc_O7xrjjBvz8QDuz4dEjkovODvoI93w/exec';\n\n// JSONP helper\nfunction fetchJsonp(url: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const callbackName = `jsonp_callback_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const script = document.createElement('script');\n    const timeoutId = setTimeout(() => {\n      cleanup();\n      reject(new Error('Request timeout'));\n    }, 30000);\n\n    function cleanup() {\n      if (script.parentNode) script.parentNode.removeChild(script);\n      delete (window as any)[callbackName];\n      clearTimeout(timeoutId);\n    }\n\n    (window as any)[callbackName] = (data: any) => {\n      cleanup();\n      resolve(data);\n    };\n\n    const separator = url.includes('?') ? '&' : '?';\n    script.src = `${url}${separator}callback=${callbackName}`;\n    script.onerror = () => {\n      cleanup();\n      reject(new Error('Script loading failed'));\n    };\n\n    document.head.appendChild(script);\n  });\n}\n\n// Convert file to base64\nfunction fileToBase64(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = error => reject(error);\n  });\n}\n\nexport default function LiftingModule() {\n  const [indents, setIndents] = useState<LiftingData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [showLiftingModal, setShowLiftingModal] = useState(false);\n  const [selectedItem, setSelectedItem] = useState<LiftingData | null>(null);\n  const [submitted, setSubmitted] = useState(false);\n\n  const [formData, setFormData] = useState<LiftingFormData>({\n    billNo: '',\n    vendorName: '',\n    liftQty: 0,\n    typeOfBill: '',\n    billAmount: 0,\n    photoOfBill: null,\n  });\n\n  useEffect(() => {\n    fetchPendingLifting();\n  }, []);\n\n  const fetchPendingLifting = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const data = await fetchJsonp(`${SCRIPT_URL}?action=getPendingLifting`);\n\n      if (data.success) {\n        setIndents(data.indents || []);\n      } else {\n        setError(data.error || 'Failed to fetch pending lifting items');\n      }\n    } catch (error) {\n      setError('Network error: ' + (error as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleActionClick = (indent: LiftingData) => {\n    setSelectedItem(indent);\n    setShowLiftingModal(true);\n    setFormData({\n      billNo: '',\n      vendorName: '',\n      liftQty: 0,\n      typeOfBill: '',\n      billAmount: 0,\n      photoOfBill: null,\n    });\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setFormData({ ...formData, photoOfBill: file });\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (\n      !formData.billNo ||\n      !formData.vendorName ||\n      !formData.liftQty ||\n      !formData.typeOfBill ||\n      !formData.billAmount\n    ) {\n      alert('Please fill in all required fields');\n      return;\n    }\n\n    if (!selectedItem) return;\n\n    try {\n      setSubmitting(true);\n\n      // Convert photo to base64 only if file exists\n      const photoBase64 = formData.photoOfBill ? await fileToBase64(formData.photoOfBill) : '';\n\n      // Create a hidden form and submit via iframe (bypasses CORS)\n      const iframe = document.createElement('iframe');\n      iframe.style.display = 'none';\n      iframe.name = 'hidden_iframe_' + Date.now();\n      document.body.appendChild(iframe);\n\n      const form = document.createElement('form');\n      form.method = 'POST';\n      form.action = SCRIPT_URL;\n      form.target = iframe.name;\n\n      const fields = {\n        action: 'submitLifting',\n        rowNumber: selectedItem.rowNumber.toString(),\n        billNo: formData.billNo,\n        vendorName: formData.vendorName,\n        liftQty: formData.liftQty.toString(),\n        typeOfBill: formData.typeOfBill,\n        billAmount: formData.billAmount.toString(),\n        photoOfBillBase64: photoBase64,\n        photoFileName: formData.photoOfBill?.name || ''\n      };\n\n      Object.entries(fields).forEach(([key, value]) => {\n        const input = document.createElement('input');\n        input.type = 'hidden';\n        input.name = key;\n        input.value = value;\n        form.appendChild(input);\n      });\n\n      document.body.appendChild(form);\n      \n      // Listen for iframe load (response received)\n      iframe.onload = () => {\n        setSubmitted(true);\n        setTimeout(() => {\n          setSubmitted(false);\n          setShowLiftingModal(false);\n          setSelectedItem(null);\n          setIndents(indents.filter(i => i.rowNumber !== selectedItem.rowNumber));\n          \n          // Cleanup\n          document.body.removeChild(form);\n          document.body.removeChild(iframe);\n        }, 2000);\n      };\n\n      form.submit();\n\n    } catch (error) {\n      console.error('Submission error:', error);\n      alert('Error during submission: ' + (error as Error).message);\n      setSubmitting(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n        <span className=\"ml-2\">Loading pending lifting items...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center py-8\">\n              <p className=\"text-destructive mb-4\">{error}</p>\n              <Button onClick={fetchPendingLifting} className=\"gap-2\">\n                <RefreshCw className=\"w-4 h-4\" />\n                Retry\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <CardTitle>Lifting Module ({indents.length} Pending)</CardTitle>\n          <Button \n            onClick={fetchPendingLifting} \n            variant=\"outline\" \n            size=\"sm\"\n            className=\"gap-2\"\n          >\n            <RefreshCw className=\"w-4 h-4\" />\n            Refresh\n          </Button>\n        </CardHeader>\n        <CardContent>\n          {indents.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              No pending lifting items at this time.\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-border\">\n                    <th className=\"text-left py-3 px-4 font-semibold\">Indent No.</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Indentor</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Group Head</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Product</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Qty</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Specifications</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Date</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {indents.map((indent) => (\n                    <tr key={indent.rowNumber} className=\"border-b border-border hover:bg-muted/50\">\n                      <td className=\"py-3 px-4\">{indent['Indent No.'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Indentor Name'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Group Head'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Product Name'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent.Qty || 0}</td>\n                      <td className=\"py-3 px-4\">{indent.Specifications || '-'}</td>\n                      <td className=\"py-3 px-4 text-sm text-muted-foreground\">\n                        {indent.Timestamp || '-'}\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <Button\n                          size=\"sm\"\n                          onClick={() => handleActionClick(indent)}\n                          className=\"gap-1\"\n                        >\n                          Submit Lifting\n                        </Button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          {/* Lifting Form Modal */}\n          {showLiftingModal && selectedItem && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto\">\n              <Card className=\"w-full max-w-2xl my-8\">\n                <CardHeader>\n                  <CardTitle>Submit Lifting Entry - {selectedItem['Indent No.']}</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={handleSubmit} className=\"space-y-6\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Bill No. *</label>\n                        <Input\n                          type=\"text\"\n                          placeholder=\"Enter bill number\"\n                          value={formData.billNo}\n                          onChange={(e) =>\n                            setFormData({ ...formData, billNo: e.target.value })\n                          }\n                          disabled={submitting}\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Vendor Name *</label>\n                        <Input\n                          type=\"text\"\n                          placeholder=\"Enter vendor name\"\n                          value={formData.vendorName}\n                          onChange={(e) =>\n                            setFormData({ ...formData, vendorName: e.target.value })\n                          }\n                          disabled={submitting}\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Lift Qty *</label>\n                        <Input\n                          type=\"number\"\n                          placeholder=\"Enter quantity\"\n                          value={formData.liftQty || ''}\n                          onChange={(e) =>\n                            setFormData({ ...formData, liftQty: parseInt(e.target.value) || 0 })\n                          }\n                          disabled={submitting}\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Bill Amount *</label>\n                        <Input\n                          type=\"number\"\n                          placeholder=\"Enter bill amount\"\n                          value={formData.billAmount || ''}\n                          onChange={(e) =>\n                            setFormData({ ...formData, billAmount: parseFloat(e.target.value) || 0 })\n                          }\n                          disabled={submitting}\n                        />\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium mb-2\">Type Of Bill *</label>\n                      <Select\n                        value={formData.typeOfBill}\n                        onValueChange={(value) =>\n                          setFormData({ ...formData, typeOfBill: value })\n                        }\n                        disabled={submitting}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select bill type\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"Independent\">Independent</SelectItem>\n                          <SelectItem value=\"Dependent\">Common</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium mb-2\">Photo Of Bill (Upload)</label>\n                      <div className=\"border-2 border-dashed border-border rounded-lg p-6 text-center cursor-pointer hover:bg-muted/50\">\n                        <input\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handleFileChange}\n                          className=\"hidden\"\n                          id=\"photo-file\"\n                          disabled={submitting}\n                        />\n                        <label htmlFor=\"photo-file\" className=\"cursor-pointer block\">\n                          <Upload className=\"w-8 h-8 mx-auto mb-2 text-muted-foreground\" />\n                          <p className=\"text-sm\">\n                            {formData.photoOfBill?.name || 'Click to upload bill photo (Optional)'}\n                          </p>\n                        </label>\n                      </div>\n                    </div>\n\n                    {submitted && (\n                      <div className=\"flex items-center gap-2 p-4 bg-green-50 dark:bg-green-500/10 border border-green-200 dark:border-green-500/30 rounded-lg\">\n                        <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n                        <p className=\"text-green-800 dark:text-green-300\">Lifting entry submitted successfully!</p>\n                      </div>\n                    )}\n\n                    <div className=\"flex gap-2\">\n                      <Button \n                        type=\"submit\" \n                        className=\"flex-1\"\n                        disabled={submitting}\n                      >\n                        {submitting ? (\n                          <>\n                            <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                            Submitting...\n                          </>\n                        ) : (\n                          'Submit Lifting Entry'\n                        )}\n                      </Button>\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => {\n                          setShowLiftingModal(false);\n                          setSelectedItem(null);\n                        }}\n                        disabled={submitting}\n                      >\n                        Cancel\n                      </Button>\n                    </div>\n                  </form>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4837, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/pages/store-in.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Loader2, RefreshCw, Upload, CheckCircle } from 'lucide-react';\n\ninterface StoreInData {\n  rowNumber: number;\n  'Indent No.'?: string;\n  'Bill No.'?: string;\n  'Vendor Name'?: string;\n  'Lift Qty'?: number;\n  'Type Of Bill'?: string;\n  'Bill Amount'?: number;\n  'Photo Of Bill'?: string;\n  'Indentor Name'?: string;\n  'Group Head'?: string;\n  'Product Name'?: string;\n  Actual1?: string;\n  Planned2?: string;\n  Timestamp?: string;\n  [key: string]: any;\n}\n\ninterface StoreInFormData {\n  inQty: number;\n  photoOfProduct: File | null;\n  unitOfMeasurement: string;\n}\n\nconst SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLkH_vSbpObvC85M-t5TBukKIRqQxi0gH_ZjIc_O7xrjjBvz8QDuz4dEjkovODvoI93w/exec';\n\n// JSONP helper\nfunction fetchJsonp(url: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const callbackName = `jsonp_callback_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const script = document.createElement('script');\n    const timeoutId = setTimeout(() => {\n      cleanup();\n      reject(new Error('Request timeout'));\n    }, 30000);\n\n    function cleanup() {\n      if (script.parentNode) script.parentNode.removeChild(script);\n      delete (window as any)[callbackName];\n      clearTimeout(timeoutId);\n    }\n\n    (window as any)[callbackName] = (data: any) => {\n      cleanup();\n      resolve(data);\n    };\n\n    const separator = url.includes('?') ? '&' : '?';\n    script.src = `${url}${separator}callback=${callbackName}`;\n    script.onerror = () => {\n      cleanup();\n      reject(new Error('Script loading failed'));\n    };\n\n    document.head.appendChild(script);\n  });\n}\n\n// Convert file to base64\nfunction fileToBase64(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = error => reject(error);\n  });\n}\n\nexport default function StoreIn() {\n  const [indents, setIndents] = useState<StoreInData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [showStoreInModal, setShowStoreInModal] = useState(false);\n  const [selectedItem, setSelectedItem] = useState<StoreInData | null>(null);\n  const [submitted, setSubmitted] = useState(false);\n\n  const [formData, setFormData] = useState<StoreInFormData>({\n    inQty: 0,\n    photoOfProduct: null,\n    unitOfMeasurement: '',\n  });\n\n  useEffect(() => {\n    fetchPendingStoreIn();\n  }, []);\n\n  const fetchPendingStoreIn = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      console.log('Fetching pending store in items...');\n      const data = await fetchJsonp(`${SCRIPT_URL}?action=getPendingStoreIn`);\n      console.log('Response:', data);\n\n      if (data.success) {\n        setIndents(data.indents || []);\n        console.log('Loaded', data.indents?.length || 0, 'pending store in items');\n      } else {\n        console.error('Error from server:', data.error);\n        setError(data.error || 'Failed to fetch pending store in items');\n      }\n    } catch (error) {\n      console.error('Fetch error:', error);\n      setError('Network error: ' + (error as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleActionClick = (indent: StoreInData) => {\n    setSelectedItem(indent);\n    setShowStoreInModal(true);\n    setFormData({\n      inQty: 0,\n      photoOfProduct: null,\n      unitOfMeasurement: '',\n    });\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setFormData({ ...formData, photoOfProduct: file });\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.inQty || !formData.photoOfProduct || !formData.unitOfMeasurement) {\n      alert('Please fill in all fields and upload photo');\n      return;\n    }\n\n    if (!selectedItem) return;\n\n    try {\n      setSubmitting(true);\n\n      // Convert photo to base64\n      const photoBase64 = await fileToBase64(formData.photoOfProduct);\n\n      // Create hidden iframe form submission (bypasses CORS)\n      const iframe = document.createElement('iframe');\n      iframe.style.display = 'none';\n      iframe.name = 'hidden_iframe_' + Date.now();\n      document.body.appendChild(iframe);\n\n      const form = document.createElement('form');\n      form.method = 'POST';\n      form.action = SCRIPT_URL;\n      form.target = iframe.name;\n\n      const fields = {\n        action: 'submitStoreIn',\n        rowNumber: selectedItem.rowNumber.toString(),\n        inQty: formData.inQty.toString(),\n        unitOfMeasurement: formData.unitOfMeasurement,\n        photoOfProductBase64: photoBase64,\n        photoFileName: formData.photoOfProduct.name\n      };\n\n      Object.entries(fields).forEach(([key, value]) => {\n        const input = document.createElement('input');\n        input.type = 'hidden';\n        input.name = key;\n        input.value = value;\n        form.appendChild(input);\n      });\n\n      document.body.appendChild(form);\n      \n      iframe.onload = () => {\n        setSubmitted(true);\n        setTimeout(() => {\n          setSubmitted(false);\n          setShowStoreInModal(false);\n          setSelectedItem(null);\n          setIndents(indents.filter(i => i.rowNumber !== selectedItem.rowNumber));\n          \n          document.body.removeChild(form);\n          document.body.removeChild(iframe);\n        }, 2000);\n      };\n\n      form.submit();\n\n    } catch (error) {\n      console.error('Submission error:', error);\n      alert('Error during submission: ' + (error as Error).message);\n      setSubmitting(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n        <span className=\"ml-2\">Loading pending store in items...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center py-8\">\n              <p className=\"text-destructive mb-4\">{error}</p>\n              <Button onClick={fetchPendingStoreIn} className=\"gap-2\">\n                <RefreshCw className=\"w-4 h-4\" />\n                Retry\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <CardTitle>Store In ({indents.length} Pending)</CardTitle>\n          <Button \n            onClick={fetchPendingStoreIn} \n            variant=\"outline\" \n            size=\"sm\"\n            className=\"gap-2\"\n          >\n            <RefreshCw className=\"w-4 h-4\" />\n            Refresh\n          </Button>\n        </CardHeader>\n        <CardContent>\n          {indents.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              No pending store in items at this time.\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-border\">\n                    <th className=\"text-left py-3 px-4 font-semibold\">Indent No.</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Bill No.</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Vendor Name</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Product</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Lift Qty</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Type Of Bill</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Bill Amount</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Date</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {indents.map((indent) => (\n                    <tr key={indent.rowNumber} className=\"border-b border-border hover:bg-muted/50\">\n                      <td className=\"py-3 px-4\">{indent['Indent No.'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Bill No.'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Vendor Name'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Product Name'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Lift Qty'] || 0}</td>\n                      <td className=\"py-3 px-4\">{indent['Type Of Bill'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Bill Amount'] || 0}</td>\n                      <td className=\"py-3 px-4\">{indent.Actual1 || '-'}</td>\n                      <td className=\"py-3 px-4\">\n                        <Button\n                          size=\"sm\"\n                          onClick={() => handleActionClick(indent)}\n                          className=\"gap-1\"\n                        >\n                          Store In\n                        </Button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          {/* Store In Form Modal */}\n          {showStoreInModal && selectedItem && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto\">\n              <Card className=\"w-full max-w-2xl my-8\">\n                <CardHeader>\n                  <CardTitle>Store In Entry - {selectedItem['Indent No.']}</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {/* Display Lifting Information (Current Step Only) */}\n                  <div className=\"mb-6 p-4 bg-blue-50 dark:bg-blue-500/10 rounded-lg border border-blue-200 dark:border-blue-500/30\">\n                    <h3 className=\"font-semibold mb-3 text-blue-900 dark:text-blue-300\">Current Step - Lifting Information</h3>\n                    <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                      <div>\n                        <span className=\"text-muted-foreground\">Indent No.:</span>\n                        <span className=\"ml-2 font-medium\">{selectedItem['Indent No.'] || '-'}</span>\n                      </div>\n                      <div>\n                        <span className=\"text-muted-foreground\">Bill No.:</span>\n                        <span className=\"ml-2 font-medium\">{selectedItem['Bill No.'] || '-'}</span>\n                      </div>\n                      <div>\n                        <span className=\"text-muted-foreground\">Vendor Name:</span>\n                        <span className=\"ml-2 font-medium\">{selectedItem['Vendor Name'] || '-'}</span>\n                      </div>\n                      <div>\n                        <span className=\"text-muted-foreground\">Lift Qty:</span>\n                        <span className=\"ml-2 font-medium\">{selectedItem['Lift Qty'] || 0}</span>\n                      </div>\n                      <div>\n                        <span className=\"text-muted-foreground\">Type Of Bill:</span>\n                        <span className=\"ml-2 font-medium\">{selectedItem['Type Of Bill'] || '-'}</span>\n                      </div>\n                      <div>\n                        <span className=\"text-muted-foreground\">Bill Amount:</span>\n                        <span className=\"ml-2 font-medium\">‚Çπ{selectedItem['Bill Amount'] || 0}</span>\n                      </div>\n                      <div>\n                        <span className=\"text-muted-foreground\">Date:</span>\n                        <span className=\"ml-2 font-medium\">{selectedItem.Actual1 || '-'}</span>\n                      </div>\n                      {selectedItem['Photo Of Bill'] && (\n                        <div className=\"col-span-2\">\n                          <span className=\"text-muted-foreground\">Photo Of Bill:</span>\n                          <a \n                            href={selectedItem['Photo Of Bill']} \n                            target=\"_blank\" \n                            rel=\"noopener noreferrer\"\n                            className=\"ml-2 text-blue-600 hover:underline\"\n                          >\n                            View Bill Photo\n                          </a>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <form onSubmit={handleSubmit} className=\"space-y-6\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Quantity (In) *</label>\n                        <Input\n                          type=\"number\"\n                          placeholder=\"Enter quantity\"\n                          value={formData.inQty || ''}\n                          onChange={(e) =>\n                            setFormData({ ...formData, inQty: parseInt(e.target.value) || 0 })\n                          }\n                          disabled={submitting}\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">Unit Of Measurement *</label>\n                        <Input\n                          type=\"text\"\n                          placeholder=\"e.g., Boxes, Units, Kg, Liter\"\n                          value={formData.unitOfMeasurement}\n                          onChange={(e) =>\n                            setFormData({ ...formData, unitOfMeasurement: e.target.value })\n                          }\n                          disabled={submitting}\n                        />\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium mb-2\">Photo Of Product (Upload) *</label>\n                      <div className=\"border-2 border-dashed border-border rounded-lg p-8 text-center cursor-pointer hover:bg-muted/50\">\n                        <input\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handleFileChange}\n                          className=\"hidden\"\n                          id=\"product-photo\"\n                          disabled={submitting}\n                        />\n                        <label htmlFor=\"product-photo\" className=\"cursor-pointer block\">\n                          <Upload className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n                          <p className=\"text-sm font-medium mb-1\">\n                            {formData.photoOfProduct?.name || 'Click to upload product photo'}\n                          </p>\n                          <p className=\"text-xs text-muted-foreground\">\n                            Supported formats: JPG, PNG, GIF\n                          </p>\n                        </label>\n                      </div>\n                    </div>\n\n                    {submitted && (\n                      <div className=\"flex items-center gap-2 p-4 bg-green-50 dark:bg-green-500/10 border border-green-200 dark:border-green-500/30 rounded-lg\">\n                        <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n                        <p className=\"text-green-800 dark:text-green-300\">Store In entry submitted successfully!</p>\n                      </div>\n                    )}\n\n                    <div className=\"flex gap-2\">\n                      <Button \n                        type=\"submit\" \n                        className=\"flex-1\"\n                        disabled={submitting}\n                      >\n                        {submitting ? (\n                          <>\n                            <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                            Submitting...\n                          </>\n                        ) : (\n                          'Submit Store In Entry'\n                        )}\n                      </Button>\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => {\n                          setShowStoreInModal(false);\n                          setSelectedItem(null);\n                        }}\n                        disabled={submitting}\n                      >\n                        Cancel\n                      </Button>\n                    </div>\n                  </form>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5842, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/pages/tally-entry.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Eye, Loader2, RefreshCw, CheckCircle } from 'lucide-react';\n\ninterface TallyEntryData {\n  rowNumber: number;\n  'Indent No.'?: string;\n  'Indentor Name'?: string;\n  'Product Name'?: string;\n  'Bill No.'?: string;\n  'Vendor Name'?: string;\n  'Lift Qty'?: number;\n  'Type Of Bill'?: string;\n  'Bill Amount'?: number;\n  'Photo Of Bill'?: string;\n  'In Qty'?: number;\n  'Photo Of Product'?: string;\n  'Unit Of Measurement'?: string;\n  Planned3?: string;\n  Timestamp?: string;\n  [key: string]: any;\n}\n\ninterface TallyFormData {\n  status: 'yes' | 'no' | '';\n  reason: string;\n}\n\nconst SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLkH_vSbpObvC85M-t5TBukKIRqQxi0gH_ZjIc_O7xrjjBvz8QDuz4dEjkovODvoI93w/exec';\n\n// JSONP helper\nfunction fetchJsonp(url: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const callbackName = `jsonp_callback_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const script = document.createElement('script');\n    const timeoutId = setTimeout(() => {\n      cleanup();\n      reject(new Error('Request timeout'));\n    }, 30000);\n\n    function cleanup() {\n      if (script.parentNode) script.parentNode.removeChild(script);\n      delete (window as any)[callbackName];\n      clearTimeout(timeoutId);\n    }\n\n    (window as any)[callbackName] = (data: any) => {\n      cleanup();\n      resolve(data);\n    };\n\n    const separator = url.includes('?') ? '&' : '?';\n    script.src = `${url}${separator}callback=${callbackName}`;\n    script.onerror = () => {\n      cleanup();\n      reject(new Error('Script loading failed'));\n    };\n\n    document.head.appendChild(script);\n  });\n}\n\nexport default function TallyEntry() {\n  const [indents, setIndents] = useState<TallyEntryData[]>([]);\n  const [selectedIndent, setSelectedIndent] = useState<TallyEntryData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [showTallyModal, setShowTallyModal] = useState(false);\n  const [selectedItem, setSelectedItem] = useState<TallyEntryData | null>(null);\n  const [submitted, setSubmitted] = useState(false);\n\n  const [formData, setFormData] = useState<TallyFormData>({\n    status: '',\n    reason: '',\n  });\n\n  useEffect(() => {\n    fetchPendingTallyEntry();\n  }, []);\n\n  const fetchPendingTallyEntry = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      console.log('Fetching pending tally entry items...');\n      const data = await fetchJsonp(`${SCRIPT_URL}?action=getPendingTallyEntry`);\n      console.log('Response:', data);\n\n      if (data.success) {\n        setIndents(data.indents || []);\n        console.log('Loaded', data.indents?.length || 0, 'pending tally entry items');\n      } else {\n        console.error('Error from server:', data.error);\n        setError(data.error || 'Failed to fetch pending tally entry items');\n      }\n    } catch (error) {\n      console.error('Fetch error:', error);\n      setError('Network error: ' + (error as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleActionClick = (indent: TallyEntryData) => {\n    setSelectedItem(indent);\n    setShowTallyModal(true);\n    setFormData({\n      status: '',\n      reason: '',\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.status || !formData.reason) {\n      alert('Please fill in all fields');\n      return;\n    }\n\n    if (!selectedItem) return;\n\n    try {\n      setSubmitting(true);\n\n      // Use GET request with JSONP to bypass CORS\n      const params = new URLSearchParams({\n        action: 'submitTallyEntry',\n        rowNumber: selectedItem.rowNumber.toString(),\n        status: formData.status,\n        reason: formData.reason\n      });\n\n      const data = await fetchJsonp(`${SCRIPT_URL}?${params.toString()}`);\n      console.log('Submission result:', data);\n\n      if (data.success) {\n        setSubmitted(true);\n        setTimeout(() => {\n          setSubmitted(false);\n          setShowTallyModal(false);\n          setSelectedItem(null);\n          setIndents(indents.filter(i => i.rowNumber !== selectedItem.rowNumber));\n        }, 2000);\n      } else {\n        alert('Error: ' + data.error);\n      }\n    } catch (error) {\n      console.error('Submission error:', error);\n      alert('Error during submission: ' + (error as Error).message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n        <span className=\"ml-2\">Loading pending tally entry items...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center py-8\">\n              <p className=\"text-destructive mb-4\">{error}</p>\n              <Button onClick={fetchPendingTallyEntry} className=\"gap-2\">\n                <RefreshCw className=\"w-4 h-4\" />\n                Retry\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <CardTitle>Tally Entry ({indents.length} Pending)</CardTitle>\n          <Button \n            onClick={fetchPendingTallyEntry} \n            variant=\"outline\" \n            size=\"sm\"\n            className=\"gap-2\"\n          >\n            <RefreshCw className=\"w-4 h-4\" />\n            Refresh\n          </Button>\n        </CardHeader>\n        <CardContent>\n          {indents.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              No pending tally entry items at this time.\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-border\">\n                    <th className=\"text-left py-3 px-4 font-semibold\">Indent No.</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Product</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Vendor</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Lift Qty</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">In Qty</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Unit</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Bill Amount</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Date</th>\n                    <th className=\"text-left py-3 px-4 font-semibold\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {indents.map((indent) => (\n                    <tr key={indent.rowNumber} className=\"border-b border-border hover:bg-muted/50\">\n                      <td className=\"py-3 px-4\">{indent['Indent No.'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Product Name'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Vendor Name'] || '-'}</td>\n                      <td className=\"py-3 px-4\">{indent['Lift Qty'] || 0}</td>\n                      <td className=\"py-3 px-4\">{indent['In Qty'] || 0}</td>\n                      <td className=\"py-3 px-4\">{indent['Unit Of Measurement'] || '-'}</td>\n                      <td className=\"py-3 px-4\">‚Çπ{indent['Bill Amount'] || 0}</td>\n                      <td className=\"py-3 px-4\">{indent.Planned3 || '-'}</td>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"flex gap-2\">\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => setSelectedIndent(indent)}\n                            className=\"gap-1\"\n                          >\n                            <Eye className=\"w-4 h-4\" />\n                          </Button>\n                          <Button\n                            size=\"sm\"\n                            onClick={() => handleActionClick(indent)}\n                            className=\"gap-1\"\n                          >\n                            Tally Entry\n                          </Button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          {/* Detail Modal */}\n          {/* Detail Modal */}\n{selectedIndent && (\n  <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\n    <Card className=\"w-full max-w-3xl max-h-[80vh] overflow-y-auto\">\n      <CardHeader>\n        <CardTitle>Complete Details</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"grid grid-cols-2 gap-4\">\n          {Object.entries(selectedIndent).map(([key, value]) => {\n            // Skip these fields\n            const fieldsToSkip = ['rowNumber', 'Planned3', 'Delay3', 'Status', 'Reason', 'Actual3'];\n            if (fieldsToSkip.includes(key)) return null;\n            \n            // Special handling for photo URLs\n            if ((key === 'Photo Of Bill' || key === 'Photo Of Product') && \n                value && typeof value === 'string' && value.startsWith('http')) {\n              return (\n                <div key={key} className=\"col-span-2\">\n                  <p className=\"text-sm text-muted-foreground\">{key}</p>\n                  <a \n                    href={value} \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\"\n                    className=\"text-blue-600 hover:underline text-sm\"\n                  >\n                    View {key}\n                  </a>\n                </div>\n              );\n            }\n            \n            return (\n              <div key={key}>\n                <p className=\"text-sm text-muted-foreground\">{key}</p>\n                <p className=\"font-medium\">{value?.toString() || '-'}</p>\n              </div>\n            );\n          })}\n        </div>\n\n                  <Button\n                    onClick={() => setSelectedIndent(null)}\n                    className=\"w-full\"\n                  >\n                    Close\n                  </Button>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {/* Tally Entry Form Modal */}\n          {showTallyModal && selectedItem && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto\">\n              <Card className=\"w-full max-w-3xl my-8\">\n                <CardHeader>\n                  <CardTitle>Tally Entry - {selectedItem['Indent No.']}</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {/* Display Previous Step Information */}\n                  <div className=\"mb-6 space-y-4\">\n                    {/* Lifting Information */}\n                    <div className=\"p-4 bg-blue-50 dark:bg-blue-500/10 rounded-lg\">\n                      <h3 className=\"font-semibold mb-3 text-blue-900 dark:text-blue-300\">Lifting Information</h3>\n                      <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                        <div>\n                          <span className=\"text-muted-foreground\">Indent No.:</span>\n                          <span className=\"ml-2 font-medium\">{selectedItem['Indent No.'] || '-'}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-muted-foreground\">Bill No.:</span>\n                          <span className=\"ml-2 font-medium\">{selectedItem['Bill No.'] || '-'}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-muted-foreground\">Vendor Name:</span>\n                          <span className=\"ml-2 font-medium\">{selectedItem['Vendor Name'] || '-'}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-muted-foreground\">Lift Qty:</span>\n                          <span className=\"ml-2 font-medium\">{selectedItem['Lift Qty'] || 0}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-muted-foreground\">Type Of Bill:</span>\n                          <span className=\"ml-2 font-medium\">{selectedItem['Type Of Bill'] || '-'}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-muted-foreground\">Bill Amount:</span>\n                          <span className=\"ml-2 font-medium\">‚Çπ{selectedItem['Bill Amount'] || 0}</span>\n                        </div>\n                        {selectedItem['Photo Of Bill'] && (\n                          <div className=\"col-span-2\">\n                            <span className=\"text-muted-foreground\">Photo Of Bill:</span>\n                            <a \n                              href={selectedItem['Photo Of Bill']} \n                              target=\"_blank\" \n                              rel=\"noopener noreferrer\"\n                              className=\"ml-2 text-blue-600 hover:underline\"\n                            >\n                              View Bill Photo\n                            </a>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Store In Information */}\n                    <div className=\"p-4 bg-green-50 dark:bg-green-500/10 rounded-lg\">\n                      <h3 className=\"font-semibold mb-3 text-green-900 dark:text-green-300\">Store In Information</h3>\n                      <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                        <div>\n                          <span className=\"text-muted-foreground\">In Qty:</span>\n                          <span className=\"ml-2 font-medium\">{selectedItem['In Qty'] || 0}</span>\n                        </div>\n                        <div>\n                          <span className=\"text-muted-foreground\">Unit Of Measurement:</span>\n                          <span className=\"ml-2 font-medium\">{selectedItem['Unit Of Measurement'] || '-'}</span>\n                        </div>\n                        {selectedItem['Photo Of Product'] && (\n                          <div className=\"col-span-2\">\n                            <span className=\"text-muted-foreground\">Photo Of Product:</span>\n                            <a \n                              href={selectedItem['Photo Of Product']} \n                              target=\"_blank\" \n                              rel=\"noopener noreferrer\"\n                              className=\"ml-2 text-blue-600 hover:underline\"\n                            >\n                              View Product Photo\n                            </a>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Tally Entry Form */}\n                  <form onSubmit={handleSubmit} className=\"space-y-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium mb-2\">Status *</label>\n                      <Select\n                        value={formData.status}\n                        onValueChange={(value: 'yes' | 'no') =>\n                          setFormData({ ...formData, status: value })\n                        }\n                        disabled={submitting}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select status\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"yes\">Yes</SelectItem>\n                          <SelectItem value=\"no\">No</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium mb-2\">Reason *</label>\n                      <textarea\n                        placeholder=\"Enter reason for the status\"\n                        value={formData.reason}\n                        onChange={(e) =>\n                          setFormData({ ...formData, reason: e.target.value })\n                        }\n                        className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-background text-foreground\"\n                        rows={5}\n                        disabled={submitting}\n                      />\n                    </div>\n\n                    {submitted && (\n                      <div className=\"flex items-center gap-2 p-4 bg-green-50 dark:bg-green-500/10 border border-green-200 dark:border-green-500/30 rounded-lg\">\n                        <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n                        <p className=\"text-green-800 dark:text-green-300\">Tally entry submitted successfully!</p>\n                      </div>\n                    )}\n\n                    <div className=\"flex gap-2\">\n                      <Button \n                        type=\"submit\" \n                        className=\"flex-1\"\n                        disabled={submitting}\n                      >\n                        {submitting ? (\n                          <>\n                            <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                            Submitting...\n                          </>\n                        ) : (\n                          'Submit Tally Entry'\n                        )}\n                      </Button>\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => {\n                          setShowTallyModal(false);\n                          setSelectedItem(null);\n                        }}\n                        disabled={submitting}\n                      >\n                        Cancel\n                      </Button>\n                    </div>\n                  </form>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7009, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/pages/Make-payment.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Eye, Loader2, RefreshCw, ExternalLink, FileText, DollarSign } from 'lucide-react';\r\n\r\ninterface PaymentData {\r\n  rowNumber: number;\r\n  'Indent No.'?: string;\r\n  'Indentor Name'?: string;\r\n  'Product Name'?: string;\r\n  'Qty'?: number;\r\n  'Bill No.'?: string;\r\n  'Amount'?: number;\r\n  'Photo Of Bill'?: string;\r\n  'Photo Of Product'?: string;\r\n  'Make Payment'?: string; // Payment link from column AG\r\n  [key: string]: any;\r\n}\r\n\r\nconst SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLkH_vSbpObvC85M-t5TBukKIRqQxi0gH_ZjIc_O7xrjjBvz8QDuz4dEjkovODvoI93w/exec';\r\n\r\n// JSONP helper\r\nfunction fetchJsonp(url: string): Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    const callbackName = `jsonp_callback_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    const script = document.createElement('script');\r\n    const timeoutId = setTimeout(() => {\r\n      cleanup();\r\n      reject(new Error('Request timeout'));\r\n    }, 30000);\r\n\r\n    function cleanup() {\r\n      if (script.parentNode) script.parentNode.removeChild(script);\r\n      delete (window as any)[callbackName];\r\n      clearTimeout(timeoutId);\r\n    }\r\n\r\n    (window as any)[callbackName] = (data: any) => {\r\n      cleanup();\r\n      resolve(data);\r\n    };\r\n\r\n    const separator = url.includes('?') ? '&' : '?';\r\n    script.src = `${url}${separator}callback=${callbackName}`;\r\n    script.onerror = () => {\r\n      cleanup();\r\n      reject(new Error('Script loading failed'));\r\n    };\r\n\r\n    document.head.appendChild(script);\r\n  });\r\n}\r\n\r\nexport default function MakePayment() {\r\n  const [payments, setPayments] = useState<PaymentData[]>([]);\r\n  const [selectedPayment, setSelectedPayment] = useState<PaymentData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState<string>('');\r\n  const [showDetailModal, setShowDetailModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchPaymentData();\r\n  }, []);\r\n\r\n  const fetchPaymentData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      console.log('Fetching payment data...');\r\n      const data = await fetchJsonp(`${SCRIPT_URL}?action=getPendingPayments`);\r\n      console.log('Response:', data);\r\n\r\n      if (data.success) {\r\n        setPayments(data.payments || []);\r\n        console.log('Loaded', data.payments?.length || 0, 'payment records');\r\n      } else {\r\n        console.error('Error from server:', data.error);\r\n        setError(data.error || 'Failed to fetch payment data');\r\n      }\r\n    } catch (error) {\r\n      console.error('Fetch error:', error);\r\n      setError('Network error: ' + (error as Error).message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMakePayment = (payment: PaymentData) => {\r\n    if (payment['Make Payment']) {\r\n      // Open payment link in new tab\r\n      window.open(payment['Make Payment'], '_blank');\r\n    } else {\r\n      alert('No payment link available for this item');\r\n    }\r\n  };\r\n\r\n  const handleViewDetails = (payment: PaymentData) => {\r\n    setSelectedPayment(payment);\r\n    setShowDetailModal(true);\r\n  };\r\n\r\n  // Filter payments based on search term\r\n  const filteredPayments = payments.filter(payment => {\r\n    if (!searchTerm) return true;\r\n    \r\n    const searchLower = searchTerm.toLowerCase();\r\n    return (\r\n      (payment['Indent No.']?.toLowerCase().includes(searchLower)) ||\r\n      (payment['Indentor Name']?.toLowerCase().includes(searchLower)) ||\r\n      (payment['Product Name']?.toLowerCase().includes(searchLower)) ||\r\n      (payment['Bill No.']?.toLowerCase().includes(searchLower))\r\n    );\r\n  });\r\n\r\n  // Calculate totals\r\n  const totalAmount = filteredPayments.reduce((sum, payment) => sum + (payment['Amount'] || 0), 0);\r\n  const totalItems = filteredPayments.length;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-screen\">\r\n        <Loader2 className=\"w-12 h-12 animate-spin text-primary mb-4\" />\r\n        <span className=\"text-lg\">Loading payment records...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"w-16 h-16 mx-auto mb-4 bg-destructive/10 rounded-full flex items-center justify-center\">\r\n                <DollarSign className=\"w-8 h-8 text-destructive\" />\r\n              </div>\r\n              <p className=\"text-destructive mb-4\">{error}</p>\r\n              <Button onClick={fetchPaymentData} className=\"gap-2\">\r\n                <RefreshCw className=\"w-4 h-4\" />\r\n                Retry Loading\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight\">Make Payment</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            Process payments for completed indents\r\n          </p>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Total Items</p>\r\n                <p className=\"text-2xl font-bold\">{totalItems}</p>\r\n              </div>\r\n              <div className=\"p-3 bg-blue-100 rounded-full\">\r\n                <FileText className=\"w-6 h-6 text-blue-600\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Total Amount</p>\r\n                <p className=\"text-2xl font-bold\">‚Çπ{totalAmount.toLocaleString()}</p>\r\n              </div>\r\n              <div className=\"p-3 bg-green-100 rounded-full\">\r\n                <DollarSign className=\"w-6 h-6 text-green-600\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Pending Payments</p>\r\n                <p className=\"text-2xl font-bold\">\r\n                  {payments.filter(p => p['Make Payment']).length}\r\n                </p>\r\n              </div>\r\n              <div className=\"p-3 bg-yellow-100 rounded-full\">\r\n                <ExternalLink className=\"w-6 h-6 text-yellow-600\" />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Search and Table */}\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n            <CardTitle>Payment Records ({filteredPayments.length})</CardTitle>\r\n            <div className=\"w-full md:w-64\">\r\n              <Input\r\n                placeholder=\"Search by Indent No, Name, Product...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {filteredPayments.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"w-20 h-20 mx-auto mb-4 bg-muted rounded-full flex items-center justify-center\">\r\n                <DollarSign className=\"w-10 h-10 text-muted-foreground\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-semibold mb-2\">No payment records found</h3>\r\n              <p className=\"text-muted-foreground\">\r\n                {searchTerm \r\n                  ? 'Try changing your search criteria' \r\n                  : 'No payments available for processing'}\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full border-collapse\">\r\n                <thead>\r\n                  <tr className=\"bg-muted/50\">\r\n                    <th className=\"text-left p-4 font-semibold border-b\">Indent No.</th>\r\n                    <th className=\"text-left p-4 font-semibold border-b\">Indentor Name</th>\r\n                    <th className=\"text-left p-4 font-semibold border-b\">Product Name</th>\r\n                    <th className=\"text-left p-4 font-semibold border-b\">Qty</th>\r\n                    <th className=\"text-left p-4 font-semibold border-b\">Bill No.</th>\r\n                    <th className=\"text-left p-4 font-semibold border-b\">Amount (‚Çπ)</th>\r\n                    <th className=\"text-left p-4 font-semibold border-b\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {filteredPayments.map((payment, index) => (\r\n                    <tr \r\n                      key={payment.rowNumber} \r\n                      className={`border-b hover:bg-muted/30 ${index % 2 === 0 ? 'bg-background' : 'bg-muted/10'}`}\r\n                    >\r\n                      <td className=\"p-4\">\r\n                        <div className=\"font-medium\">{payment['Indent No.'] || '-'}</div>\r\n                      </td>\r\n                      <td className=\"p-4\">\r\n                        <div className=\"font-medium\">{payment['Indentor Name'] || '-'}</div>\r\n                      </td>\r\n                      <td className=\"p-4\">\r\n                        <div className=\"font-medium\">{payment['Product Name'] || '-'}</div>\r\n                      </td>\r\n                      <td className=\"p-4\">\r\n                        <div className=\"font-medium\">{payment['Qty'] || 0}</div>\r\n                      </td>\r\n                      <td className=\"p-4\">\r\n                        <div className=\"font-medium\">{payment['Bill No.'] || '-'}</div>\r\n                      </td>\r\n                      <td className=\"p-4\">\r\n                        <div className=\"font-bold\">‚Çπ{payment['Amount']?.toLocaleString() || 0}</div>\r\n                      </td>\r\n                      <td className=\"p-4\">\r\n                        <div className=\"flex gap-2\">\r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"outline\"\r\n                            onClick={() => handleViewDetails(payment)}\r\n                            className=\"gap-1\"\r\n                          >\r\n                            <Eye className=\"w-4 h-4\" />\r\n                            View\r\n                          </Button>\r\n                          <Button\r\n                            size=\"sm\"\r\n                            onClick={() => handleMakePayment(payment)}\r\n                            className=\"gap-1\"\r\n                            disabled={!payment['Make Payment']}\r\n                            title={payment['Make Payment'] ? \"Open payment link\" : \"No payment link available\"}\r\n                          >\r\n                            <ExternalLink className=\"w-4 h-4\" />\r\n                            Make Payment\r\n                          </Button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n\r\n          {/* Summary Footer */}\r\n          {/* {filteredPayments.length > 0 && (\r\n            <div className=\"mt-6 p-4 bg-muted rounded-lg\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Showing {filteredPayments.length} of {payments.length} records\r\n                  </p>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">\r\n                    Items with payment links: {payments.filter(p => p['Make Payment']).length}\r\n                  </p>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"text-lg font-bold\">Total: ‚Çπ{totalAmount.toLocaleString()}</p>\r\n                </div>\r\n              </div>\r\n            </div> \r\n          )} */}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Detail Modal */}\r\n      {showDetailModal && selectedPayment && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto\">\r\n          <Card className=\"w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n            <CardHeader className=\"sticky top-0 bg-background z-10 border-b\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <CardTitle>Payment Details - {selectedPayment['Indent No.']}</CardTitle>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    setShowDetailModal(false);\r\n                    setSelectedPayment(null);\r\n                  }}\r\n                >\r\n                  Close\r\n                </Button>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6 pt-6\">\r\n              {/* Main Details */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <h3 className=\"text-sm font-medium text-muted-foreground mb-2\">Indent Information</h3>\r\n                    <div className=\"space-y-3\">\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Indent No.</p>\r\n                        <p className=\"font-medium\">{selectedPayment['Indent No.'] || '-'}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Indentor Name</p>\r\n                        <p className=\"font-medium\">{selectedPayment['Indentor Name'] || '-'}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <h3 className=\"text-sm font-medium text-muted-foreground mb-2\">Product Information</h3>\r\n                    <div className=\"space-y-3\">\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Product Name</p>\r\n                        <p className=\"font-medium\">{selectedPayment['Product Name'] || '-'}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Quantity</p>\r\n                        <p className=\"font-medium\">{selectedPayment['Qty'] || 0}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <h3 className=\"text-sm font-medium text-muted-foreground mb-2\">Bill Information</h3>\r\n                    <div className=\"space-y-3\">\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Bill No.</p>\r\n                        <p className=\"font-medium\">{selectedPayment['Bill No.'] || '-'}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-sm text-muted-foreground\">Amount</p>\r\n                        <p className=\"text-2xl font-bold text-primary\">\r\n                          ‚Çπ{selectedPayment['Amount']?.toLocaleString() || 0}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <h3 className=\"text-sm font-medium text-muted-foreground mb-2\">Payment Link</h3>\r\n                    <div className=\"space-y-3\">\r\n                      {selectedPayment['Make Payment'] ? (\r\n                        <div>\r\n                          <p className=\"text-sm text-muted-foreground mb-2\">Payment URL</p>\r\n                          <a\r\n                            href={selectedPayment['Make Payment']}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\r\n                          >\r\n                            <ExternalLink className=\"w-4 h-4\" />\r\n                            Open Payment Portal\r\n                          </a>\r\n                          <p className=\"text-xs text-muted-foreground mt-2\">\r\n                            Click to open payment link in new tab\r\n                          </p>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"p-4 bg-yellow-50 dark:bg-yellow-500/10 rounded-lg\">\r\n                          <p className=\"text-yellow-800 dark:text-yellow-300\">\r\n                            No payment link available for this item\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Photo Sections */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                {selectedPayment['Photo Of Bill'] && (\r\n                  <div>\r\n                    <h3 className=\"text-sm font-medium text-muted-foreground mb-2\">Bill Photo</h3>\r\n                    <div className=\"p-4 border rounded-lg\">\r\n                      <a\r\n                        href={selectedPayment['Photo Of Bill']}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"inline-flex items-center gap-2 text-blue-600 hover:underline\"\r\n                      >\r\n                        <Eye className=\"w-4 h-4\" />\r\n                        View Bill Photo\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {selectedPayment['Photo Of Product'] && (\r\n                  <div>\r\n                    <h3 className=\"text-sm font-medium text-muted-foreground mb-2\">Product Photo</h3>\r\n                    <div className=\"p-4 border rounded-lg\">\r\n                      <a\r\n                        href={selectedPayment['Photo Of Product']}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"inline-flex items-center gap-2 text-blue-600 hover:underline\"\r\n                      >\r\n                        <Eye className=\"w-4 h-4\" />\r\n                        View Product Photo\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <Button\r\n                onClick={() => {\r\n                  setShowDetailModal(false);\r\n                  setSelectedPayment(null);\r\n                }}\r\n                className=\"w-full mt-6\"\r\n              >\r\n                Close Details\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8293, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/pages/License.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { KeyRound, Mail, Globe, Shield, AlertCircle } from 'lucide-react';\n\nconst License = () => {\n    const [userRole, setUserRole] = useState(\"\");\n    const [username, setUsername] = useState(\"\");\n\n    // Get user info from sessionStorage\n    useEffect(() => {\n        const storedRole = sessionStorage.getItem('role') || 'user';\n        const storedUsername = sessionStorage.getItem('username') || 'User';\n        setUserRole(storedRole);\n        setUsername(storedUsername);\n    }, []);\n\n    return (\n        <div className=\"p-6 space-y-6\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                    <div className=\"p-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg\">\n                        <KeyRound className=\"h-6 w-6 text-white\" />\n                    </div>\n                    <div>\n                        <h1 className=\"text-3xl font-bold\">License Agreement</h1>\n                        <p className=\"text-muted-foreground\">Software license terms and conditions</p>\n                    </div>\n                </div>\n            </div>\n\n            {/* Main Content */}\n            <div className=\"grid grid-cols-1 gap-6 max-w-4xl\">\n                {/* Copyright Notice Card */}\n                <Card className=\"border-2 border-blue-200 dark:border-blue-800\">\n                    <CardHeader className=\"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950 dark:to-purple-950\">\n                        <CardTitle className=\"flex items-center gap-2\">\n                            <Shield className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n                            Copyright Notice\n                        </CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"pt-6\">\n                        <div className=\"space-y-4\">\n                            <div className=\"text-center\">\n                                <h2 className=\"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-4\">\n                                    ¬© BOTIVATE SERVICES LLP\n                                </h2>\n                                <p className=\"text-lg leading-relaxed text-foreground\">\n                                    This software is developed exclusively by Botivate Services LLP for use by its clients.\n                                </p>\n                            </div>\n                            \n                            <div className=\"bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 flex gap-3\">\n                                <AlertCircle className=\"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5\" />\n                                <p className=\"text-sm text-amber-900 dark:text-amber-200\">\n                                    <strong>Warning:</strong> Unauthorized use, distribution, or copying of this software is strictly prohibited and may result in legal action.\n                                </p>\n                            </div>\n                        </div>\n                    </CardContent>\n                </Card>\n\n                {/* License Terms Card */}\n                <Card>\n                    <CardHeader>\n                        <CardTitle>License Terms</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                        <div className=\"space-y-3\">\n                            <div>\n                                <h3 className=\"font-semibold text-lg mb-2\">1. Grant of License</h3>\n                                <p className=\"text-muted-foreground\">\n                                    Botivate Services LLP grants you a non-exclusive, non-transferable license to use this software solely for your internal business operations.\n                                </p>\n                            </div>\n\n                            <div>\n                                <h3 className=\"font-semibold text-lg mb-2\">2. Restrictions</h3>\n                                <ul className=\"list-disc list-inside space-y-1 text-muted-foreground\">\n                                    <li>You may not modify, adapt, or create derivative works</li>\n                                    <li>You may not reverse engineer, decompile, or disassemble the software</li>\n                                    <li>You may not distribute, sublicense, or transfer the software to third parties</li>\n                                    <li>You may not remove or alter any copyright notices</li>\n                                </ul>\n                            </div>\n\n                            <div>\n                                <h3 className=\"font-semibold text-lg mb-2\">3. Intellectual Property</h3>\n                                <p className=\"text-muted-foreground\">\n                                    All intellectual property rights in and to the software remain the exclusive property of Botivate Services LLP.\n                                </p>\n                            </div>\n\n                            <div>\n                                <h3 className=\"font-semibold text-lg mb-2\">4. Support and Maintenance</h3>\n                                <p className=\"text-muted-foreground\">\n                                    Technical support and software updates are provided as per the terms of your service agreement.\n                                </p>\n                            </div>\n\n                            <div>\n                                <h3 className=\"font-semibold text-lg mb-2\">5. Termination</h3>\n                                <p className=\"text-muted-foreground\">\n                                    This license is effective until terminated. Botivate Services LLP may terminate this license if you fail to comply with any terms.\n                                </p>\n                            </div>\n                        </div>\n                    </CardContent>\n                </Card>\n\n                {/* Contact Information Card */}\n                <Card className=\"border-2 border-blue-200 dark:border-blue-800\">\n                    <CardHeader className=\"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950 dark:to-purple-950\">\n                        <CardTitle className=\"flex items-center gap-2\">\n                            <Mail className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n                            Contact Information\n                        </CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"pt-6\">\n                        <p className=\"text-center mb-6 text-muted-foreground\">\n                            For license inquiries or technical support, please contact our support team:\n                        </p>\n                        \n                        <div className=\"space-y-4\">\n                            <div className=\"flex items-center justify-center gap-3 p-4 bg-muted/50 rounded-lg hover:bg-muted transition-colors\">\n                                <Mail className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n                                <a \n                                    href=\"mailto:info@botivate.in\" \n                                    className=\"text-blue-600 dark:text-blue-400 font-medium hover:underline\"\n                                >\n                                    info@botivate.in\n                                </a>\n                            </div>\n\n                            <div className=\"flex items-center justify-center gap-3 p-4 bg-muted/50 rounded-lg hover:bg-muted transition-colors\">\n                                <Globe className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n                                <a \n                                    href=\"https://www.botivate.in\" \n                                    target=\"_blank\" \n                                    rel=\"noopener noreferrer\" \n                                    className=\"text-blue-600 dark:text-blue-400 font-medium hover:underline\"\n                                >\n                                    www.botivate.in\n                                </a>\n                            </div>\n                        </div>\n                    </CardContent>\n                </Card>\n\n                {/* Footer Card */}\n                <Card className=\"bg-muted/50\">\n                    <CardContent className=\"pt-6\">\n                        <p className=\"text-center text-sm text-muted-foreground\">\n                            <strong>Note:</strong> By using this software, you acknowledge that you have read, understood, and agree to be bound by the terms of this license agreement.\n                        </p>\n                    </CardContent>\n                </Card>\n            </div>\n        </div>\n    );\n};\n\nexport default License;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8833, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/components/dashboard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Sidebar from '@/components/sidebar';\nimport DashboardPage from '@/components/pages/dashboard-page';\nimport CreateIndent from '@/components/pages/create-indent';\nimport ApproveIndent from '@/components/pages/approve-indent';\nimport LiftingModule from '@/components/pages/lifting-module';\nimport StoreIn from '@/components/pages/store-in';\nimport TallyEntry from '@/components/pages/tally-entry';\nimport MakePayment from './pages/Make-payment'; // Note the lowercase 'm'\nimport License from './pages/License';\nimport { Button } from '@/components/ui/button';\nimport { LogOut } from 'lucide-react';\nimport { Card, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { AlertTriangle } from 'lucide-react';\n\ninterface User {\n  username: string;\n  name: string;\n  allowedPages: string[];\n  [key: string]: any;\n}\n\ninterface DashboardProps {\n  user: User;\n  onLogout: () => void;\n}\n\nexport default function Dashboard({ user, onLogout }: DashboardProps) {\n  // Set initial page to first allowed page\n  const getInitialPage = () => {\n    if (user.allowedPages && user.allowedPages.length > 0) {\n      return user.allowedPages[0];\n    }\n    return 'dashboard';\n  };\n\n  const [currentPage, setCurrentPage] = useState(getInitialPage());\n\n  // Check if user has access to current page\n  const hasAccess = user.allowedPages && user.allowedPages.includes(currentPage);\n\n  // If no access, redirect to first allowed page\n  useEffect(() => {\n    if (!hasAccess && user.allowedPages && user.allowedPages.length > 0) {\n      setCurrentPage(user.allowedPages[0]);\n    }\n  }, [currentPage, hasAccess, user.allowedPages]);\n\n  const renderPage = () => {\n    // Show access denied if user doesn't have permission\n    if (!hasAccess) {\n      return (\n        <div className=\"flex items-center justify-center h-full p-8\">\n          <Card className=\"max-w-md\">\n            <CardHeader className=\"text-center\">\n              <div className=\"mx-auto bg-destructive/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mb-4\">\n                <AlertTriangle className=\"w-8 h-8 text-destructive\" />\n              </div>\n              <CardTitle className=\"text-2xl text-destructive\">Access Denied</CardTitle>\n              <CardDescription className=\"text-base mt-2\">\n                You don't have permission to access this page. Contact administrator.\n              </CardDescription>\n            </CardHeader>\n          </Card>\n        </div>\n      );\n    }\n\n    // Render the appropriate page\n    switch (currentPage) {\n      case 'dashboard':\n        return <DashboardPage />;\n      case 'create-indent':\n        return <CreateIndent />;\n      case 'approve-indent':\n        return <ApproveIndent />;\n      case 'lifting':\n        return <LiftingModule />;\n      case 'store-in':\n        return <StoreIn />;\n      case 'tally-entry':\n        return <TallyEntry />;\n      case 'make-payment':\n        return <MakePayment />;\n      case 'license':\n        return <License />;\n      default:\n        return <DashboardPage />;\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-background\">\n      <Sidebar \n        currentPage={currentPage} \n        onPageChange={setCurrentPage}\n        allowedPages={user.allowedPages}\n      />\n      \n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header */}\n        <div className=\"bg-card border-b border-border p-4 flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-foreground\">\n              {currentPage.split('-').map(word => \n                word.charAt(0).toUpperCase() + word.slice(1)\n              ).join(' ')}\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">\n              Logged in as: <span className=\"font-medium\">{user.name}</span> (@{user.username})\n            </p>\n          </div>\n          <Button variant=\"outline\" onClick={onLogout} className=\"gap-2\">\n            <LogOut className=\"w-4 h-4\" />\n            Logout\n          </Button>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 overflow-auto\">\n          {renderPage()}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6OAAgD,yBAAyB;AACzE;AACA;AACA;AACA;AACA;AAfA;;;;;;;;;;;;;;;;AA6Be,SAAS,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAkB;IAClE,yCAAyC;IACzC,MAAM,iBAAiB;QACrB,IAAI,KAAK,YAAY,IAAI,KAAK,YAAY,CAAC,MAAM,GAAG,GAAG;YACrD,OAAO,KAAK,YAAY,CAAC,EAAE;QAC7B;QACA,OAAO;IACT;IAEA,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,2CAA2C;IAC3C,MAAM,YAAY,KAAK,YAAY,IAAI,KAAK,YAAY,CAAC,QAAQ,CAAC;IAElE,+CAA+C;IAC/C,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,aAAa,KAAK,YAAY,IAAI,KAAK,YAAY,CAAC,MAAM,GAAG,GAAG;YACnE,eAAe,KAAK,YAAY,CAAC,EAAE;QACrC;IACF,GAAG;QAAC;QAAa;QAAW,KAAK,YAAY;KAAC;IAE9C,MAAM,aAAa;QACjB,qDAAqD;QACrD,IAAI,CAAC,WAAW;YACd,qBACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,iIAAI;oBAAC,WAAU;8BACd,cAAA,8OAAC,uIAAU;wBAAC,WAAU;;0CACpB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,yOAAa;oCAAC,WAAU;;;;;;;;;;;0CAE3B,8OAAC,sIAAS;gCAAC,WAAU;0CAA4B;;;;;;0CACjD,8OAAC,4IAAe;gCAAC,WAAU;0CAAiB;;;;;;;;;;;;;;;;;;;;;;QAOtD;QAEA,8BAA8B;QAC9B,OAAQ;YACN,KAAK;gBACH,qBAAO,8OAAC,oJAAa;;;;;YACvB,KAAK;gBACH,qBAAO,8OAAC,mJAAY;;;;;YACtB,KAAK;gBACH,qBAAO,8OAAC,oJAAa;;;;;YACvB,KAAK;gBACH,qBAAO,8OAAC,oJAAa;;;;;YACvB,KAAK;gBACH,qBAAO,8OAAC,8IAAO;;;;;YACjB,KAAK;gBACH,qBAAO,8OAAC,iJAAU;;;;;YACpB,KAAK;gBACH,qBAAO,8OAAC,kJAAW;;;;;YACrB,KAAK;gBACH,qBAAO,8OAAC,0IAAO;;;;;YACjB;gBACE,qBAAO,8OAAC,oJAAa;;;;;QACzB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,iIAAO;gBACN,aAAa;gBACb,cAAc;gBACd,cAAc,KAAK,YAAY;;;;;;0BAGjC,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDACX,YAAY,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,OAC1B,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC,IAC1C,IAAI,CAAC;;;;;;kDAET,8OAAC;wCAAE,WAAU;;4CAAgC;0DAC7B,8OAAC;gDAAK,WAAU;0DAAe,KAAK,IAAI;;;;;;4CAAQ;4CAAI,KAAK,QAAQ;4CAAC;;;;;;;;;;;;;0CAGpF,8OAAC,qIAAM;gCAAC,SAAQ;gCAAU,SAAS;gCAAU,WAAU;;kDACrD,8OAAC,oNAAM;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;kCAMlC,8OAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 9109, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/Office-FMS-main/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport LoginPage from '@/components/login-page';\nimport Dashboard from '@/components/dashboard';\n\ninterface User {\n  username: string;\n  name: string;\n  allowedPages: string[]; // ‚úÖ ADDED THIS\n  role?: string;\n  [key: string]: any;\n}\n\nexport default function Home() {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Check localStorage on mount (client-side only)\n  useEffect(() => {\n    const savedUser = localStorage.getItem('fms_user');\n    if (savedUser) {\n      try {\n        const parsedUser = JSON.parse(savedUser);\n        \n        // ‚úÖ VALIDATE that user has allowedPages\n        if (parsedUser && Array.isArray(parsedUser.allowedPages)) {\n          setUser(parsedUser);\n        } else {\n          console.warn('‚ö†Ô∏è Saved user data is invalid, clearing...');\n          localStorage.removeItem('fms_user');\n        }\n      } catch (error) {\n        console.error('Error parsing saved user:', error);\n        localStorage.removeItem('fms_user');\n      }\n    }\n    setIsLoading(false);\n  }, []);\n\n  const handleLogin = (userData: User) => {\n    console.log('‚úÖ User logged in:', userData);\n    console.log('üìÑ Allowed pages:', userData.allowedPages);\n    \n    // ‚úÖ VALIDATE before saving\n    if (!userData.allowedPages || userData.allowedPages.length === 0) {\n      console.error('‚ùå User has no allowed pages!');\n      alert('No page access configured. Contact administrator.');\n      return;\n    }\n    \n    setUser(userData);\n    localStorage.setItem('fms_user', JSON.stringify(userData));\n  };\n\n  const handleLogout = () => {\n    console.log('üëã User logged out');\n    setUser(null);\n    localStorage.removeItem('fms_user');\n  };\n\n  // Show loading state to prevent hydration mismatch\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"flex flex-col items-center space-y-4\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n          <p className=\"text-muted-foreground font-medium\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show login if no user\n  if (!user) {\n    return <LoginPage onLogin={handleLogin} />;\n  }\n\n  // Show dashboard if user exists\n  return <Dashboard user={user} onLogout={handleLogout} />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAce,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,iDAAiD;IACjD,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACb,IAAI;gBACF,MAAM,aAAa,KAAK,KAAK,CAAC;gBAE9B,wCAAwC;gBACxC,IAAI,cAAc,MAAM,OAAO,CAAC,WAAW,YAAY,GAAG;oBACxD,QAAQ;gBACV,OAAO;oBACL,QAAQ,IAAI,CAAC;oBACb,aAAa,UAAU,CAAC;gBAC1B;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,aAAa,UAAU,CAAC;YAC1B;QACF;QACA,aAAa;IACf,GAAG,EAAE;IAEL,MAAM,cAAc,CAAC;QACnB,QAAQ,GAAG,CAAC,qBAAqB;QACjC,QAAQ,GAAG,CAAC,qBAAqB,SAAS,YAAY;QAEtD,2BAA2B;QAC3B,IAAI,CAAC,SAAS,YAAY,IAAI,SAAS,YAAY,CAAC,MAAM,KAAK,GAAG;YAChE,QAAQ,KAAK,CAAC;YACd,MAAM;YACN;QACF;QAEA,QAAQ;QACR,aAAa,OAAO,CAAC,YAAY,KAAK,SAAS,CAAC;IAClD;IAEA,MAAM,eAAe;QACnB,QAAQ,GAAG,CAAC;QACZ,QAAQ;QACR,aAAa,UAAU,CAAC;IAC1B;IAEA,mDAAmD;IACnD,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAoC;;;;;;;;;;;;;;;;;IAIzD;IAEA,wBAAwB;IACxB,IAAI,CAAC,MAAM;QACT,qBAAO,8OAAC,uIAAS;YAAC,SAAS;;;;;;IAC7B;IAEA,gCAAgC;IAChC,qBAAO,8OAAC,mIAAS;QAAC,MAAM;QAAM,UAAU;;;;;;AAC1C"}}]
}